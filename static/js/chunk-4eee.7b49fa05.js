(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4eee"],{CSbe:function(e,t,a){"use strict";var i=a("b6GN");a.n(i).a},XfoO:function(e,t,a){},b6GN:function(e,t,a){},itf2:function(e,t,a){"use strict";a.r(t);var i=a("UgT1"),n=a("aOAA"),o=a("+n12"),l={data:function(){return{name_edit:"",identification:"",taskJob:[{}],activeNames:["1","2","3"],operationState:null,dictionaryInfo:{label:"",name:"",dataType:"",system:!1,desc:"",values:[]},itemConfig:{},deleteItems:[],dataTypeOptions:[{label:"字符串",value:"string"},{label:"整数",value:"int"},{label:"布尔型",value:"boolean"}],dialogVisible:!1,rules:{name:[{trigger:"blur",required:!0,message:"标识不能为空"}],label:[{trigger:"blur",required:!0,message:"名称不能为空"}],dataType:[{trigger:"blur",required:!0,message:"数据类型不能为空"}],value:[{trigger:"blur",required:!0,message:"数据类型不能为空"}]},itemInfo:{},itemRules:{identification:[{trigger:"blur",required:!0,message:"标识不能为空"}],name:[{trigger:"blur",required:!0,message:"标识不能为空"}],label:[{trigger:"blur",required:!0,message:"名称不能为空"}],value:[{trigger:"blur",required:!0,message:"选项值不能为空"}]},selectedItemInfo:[],labelConfig:{maxlength:50},nameConfig:{maxlength:50},itemLabelConfig:{maxlength:20},itemNameConfig:{maxlength:20},itemValueConfig:{maxlength:20},itemDescConfig:{maxlength:500},editable:!1,addable:!1,isEditItemInfo:!1}},methods:{openAddItemModel:function(){this.itemInfo={},this.isEditItemInfo=!1,this.dialogVisible=!0},addItemAction:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;for(var a=0,i=0;i<t.dictionaryInfo.values.length;i++)t.dictionaryInfo.values[i].name===t.itemInfo.name&&(a+=1);if(a>1)n.a.notify("提示","已经存在同标识的数据!");else if(1===a){for(i=0;i<t.dictionaryInfo.values.length;i++)t.dictionaryInfo.values[i].name===t.itemInfo.name&&(t.dictionaryInfo.values[i].action="update",t.dictionaryInfo.values[i].label=t.itemInfo.label,t.dictionaryInfo.values[i].value=t.itemInfo.value,t.dictionaryInfo.values[i].desc=t.itemInfo.desc);t.dialogVisible=!1}else{t.itemInfo.action="add",t.itemInfo.order=t.dictionaryInfo.values.length+1;for(i=0;i<t.dictionaryInfo.values.length;i++)delete t.dictionaryInfo.values[i].isBotton;t.dictionaryInfo.values.push(t.itemInfo),t.dictionaryInfo.values[t.dictionaryInfo.values.length-1].isBotton=!0,t.dialogVisible=!1}})},itemRowAction:function(e,t,a){if("remove"===e){this.deleteItems.push(a),this.dictionaryInfo.values.splice(t,1);for(var i=0;i<this.dictionaryInfo.values.length;i++)this.dictionaryInfo.values[i].order=i+1,this.dictionaryInfo.values[i].action="update",delete this.dictionaryInfo.values[i].isBotton;this.dictionaryInfo.values.length>0&&(this.dictionaryInfo.values[this.dictionaryInfo.values.length-1].isBotton=!0)}else if("up"===e){this.dictionaryInfo.values[t-1]=this.dictionaryInfo.values.splice(t,1,this.dictionaryInfo.values[t-1])[0],this.dictionaryInfo.values[t-1].order=t,this.dictionaryInfo.values[t].order=t+1,this.dictionaryInfo.values[t].action="update",this.dictionaryInfo.values[t-1].action="update";for(i=0;i<this.dictionaryInfo.values.length;i++)i<this.dictionaryInfo.values.length-1?delete this.dictionaryInfo.values[i].isBotton:this.dictionaryInfo.values[i].isBotton=!0}else if("down"===e){this.dictionaryInfo.values[t]=this.dictionaryInfo.values.splice(t+1,1,this.dictionaryInfo.values[t])[0],this.dictionaryInfo.values[t+1].order=t+2,this.dictionaryInfo.values[t].order=t+1,this.dictionaryInfo.values[t].action="update",this.dictionaryInfo.values[t+1].action="update";for(i=0;i<this.dictionaryInfo.values.length;i++)i<this.dictionaryInfo.values.length-1?delete this.dictionaryInfo.values[i].isBotton:this.dictionaryInfo.values[i].isBotton=!0}else"label"===e&&(this.itemInfo=o.a.copy(a),this.isEditItemInfo=!0,this.dialogVisible=!0)},hasItemSelected:function(e){this.selectedItemInfo=e},deleteItem:function(e){if(0!==e.length){for(var t=[],a=0;a<this.dictionaryInfo.values.length;a++){for(var i=!1,o=0;o<e.length;o++)if(this.dictionaryInfo.values[a].name===e[o].name){this.deleteItems.push(e[o]),i=!0;break}i||t.push(this.dictionaryInfo.values[a])}for(a=0;a<t.length;a++)t[a].order=a+1,t[a].action="update";t[t.length-1].isBotton=!0,this.dictionaryInfo.values=t}else n.a.notify("提示","没有选择任何数据!")},onSubmit:function(){var e=this;this.$refs.dictionaryInfo.validate(function(t){if(t)if("update"===e.operationState){var a=o.a.copy(e.dictionaryInfo);if(e.deleteItems.length>0)for(var l=0;l<e.deleteItems.length;l++)e.deleteItems[l].action="delete",a.values.push(e.deleteItems[l]);i.a.updateEnums(a.name,a).then(function(t){e.$message.success("更新字典成功");for(var a=0;a<e.dictionaryInfo.values.length;a++)e.dictionaryInfo.values[a].action="update"},function(e){n.a.error("创建失败",e.response.data.message)})}else delete e.dictionaryInfo.system,i.a.createEnums(e.dictionaryInfo).then(function(t){e.$message.success("创建字典成功"),e.operationState="update",e.addable=!1,e.editable=!0;for(var a=0;a<e.dictionaryInfo.values.length;a++)e.dictionaryInfo.values[a].action="update"},function(e){n.a.error("创建失败",e.response.data.message)})})}},created:function(){var e=this,t=this;/[^/]*\/edit\/[^/]*/.test(this.$route.path)&&(this.editable=!0),/[^/]*\/add/.test(this.$route.path)&&(this.addable=!0),this.itemConfig={selectionMode:"selection",readonly:!0,columns:[{label:"选项标识",name:"name",minwidth:"200px"},{label:"选项名称",name:"label",minwidth:"200px",type:"modal"},{label:"选项值",name:"value",width:"100px"},{label:"描述",name:"desc",width:"350px"},{label:"标记",name:"system",width:"100px",type:"template"}],actionWidth:"90",actions:[{name:"up",width:"60px",icon:"iconfont iconshang",validation:function(e){return 1!==e.order&&(t.editable||t.addable)}},{name:"down",width:"60px",icon:"iconfont iconxia",validation:function(e){return!e.isBotton&&(t.editable||t.addable)}},{name:"remove",width:"60px",icon:"el-icon-delete",validation:function(e){return t.editable||t.addable}}]};var a=this.$route.params.name;a&&i.a.queryEnums("name = '"+a+"'").then(function(t){t&&(e.operationState="update",t.rows[0].values.sort(function(e,t){return e.order-t.order}),t.rows[0].values&&t.rows[0].values.length>0&&(t.rows[0].values[t.rows[0].values.length-1].isBotton=!0),e.dictionaryInfo=t.rows[0])})}},s=(a("CSbe"),a("wia3"),a("KHd+")),r=Object(s.a)(l,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"app-container ilayout-container sub"},[a("el-header",[a("el-row",[a("router-link",{attrs:{to:"/setting/dictionary"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("返回")])],1),e._v(" "),e.addable?e._e():a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("上一条")]),e._v(" "),e.addable?e._e():a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("下一条")]),e._v(" "),e.editable||e.addable?e._e():a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.editable=!0}}},[e._v("编辑")]),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSubmit}},[e._v("保存")]):e._e(),e._v(" "),e.addable?e._e():a("router-link",{attrs:{to:"/setting/dictionary/add"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-main",[a("el-collapse",{staticClass:"its_collapse",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"dictionaryInfo",attrs:{"label-width":"80px",model:e.dictionaryInfo,rules:e.rules}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"字典标识",prop:"name"}},[a("itsnow-text",{attrs:{config:e.nameConfig,readonly:!e.addable},model:{value:e.dictionaryInfo.name,callback:function(t){e.$set(e.dictionaryInfo,"name",t)},expression:"dictionaryInfo.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"字典名称"}},[a("itsnow-text",{attrs:{config:e.labelConfig,readonly:!e.editable&&!e.addable},model:{value:e.dictionaryInfo.label,callback:function(t){e.$set(e.dictionaryInfo,"label",t)},expression:"dictionaryInfo.label"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"标记",prop:"system"}},[e.dictionaryInfo.system?a("el-input",{attrs:{value:"系统",disabled:""}}):a("el-input",{attrs:{value:"自定义",disabled:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"数据类型",prop:"dataType"}},[a("itsnow-select",{attrs:{options:e.dataTypeOptions,disabled:!e.editable&&!e.addable},model:{value:e.dictionaryInfo.dataType,callback:function(t){e.$set(e.dictionaryInfo,"dataType",t)},expression:"dictionaryInfo.dataType"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"描述",prop:"desc"}},[a("itsnow-textarea",{attrs:{config:e.descConfig,readonly:!e.editable&&!e.addable},model:{value:e.dictionaryInfo.desc,callback:function(t){e.$set(e.dictionaryInfo,"desc",t)},expression:"dictionaryInfo.desc"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-col",{attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"选项信息",name:"2"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:21,offset:1}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"选项"}},[a("el-col",{staticClass:"form_tool"},[e.editable||e.addable?a("el-col",{staticClass:"form_tool_bar"},[e.editable||e.addable?a("el-button",{attrs:{size:"mini",type:"text",plain:""}},[e._v("\n                                  新增\n                                ")]):e._e(),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{size:"mini",type:"text"}},[e._v("删除\n                                ")]):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"its_table must",staticStyle:{"padding-top":"0"}},[a("el-form",{attrs:{rules:e.rules}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.taskJob,stripe:"",border:""}},[e.editable||e.addable?a("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"选项标识","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{label:" ","label-width":"0",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入",disabled:!e.editable&&!e.addable}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"选项名称",prop:"state","min-width":"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{label:" ","label-width":"0"}},[a("el-input",{attrs:{placeholder:"请输入",disabled:!e.editable&&!e.addable}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"task",label:"选项值",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{label:" ","label-width":"0",prop:"value"}},[a("el-input",{attrs:{placeholder:"请输入",disabled:!e.editable&&!e.addable}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"time",label:"描述",width:"350"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form-item",{attrs:{label:" ","label-width":"0"}},[a("el-input",{attrs:{placeholder:"请输入",disabled:!e.editable&&!e.addable,type:"textarea",autosize:""}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"update",label:"标记",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                                        自定义\n                                      ")]}}])}),e._v(" "),e.editable||e.addable?a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-top",disabled:""}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-bottom",disabled:""}}),e._v(" "),a("el-button",{staticStyle:{transform:"rotate(180deg)"},attrs:{type:"text",size:"mini",icon:"el-icon-download",disabled:""}}),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-download",disabled:""}}),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"}})]}}],null,!1,3988791234)}):e._e()],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)])],1)],1)},[],!1,null,"14216348",null);t.default=r.exports},wia3:function(e,t,a){"use strict";var i=a("XfoO");a.n(i).a}}]);