(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1d02"],{"2iHq":function(e,t,i){"use strict";var a=i("92J+");i.n(a).a},"5pzU":function(e,t,i){"use strict";i.r(t);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l={props:{categories:{type:Array}},model:{event:["reloadTree","current","statusChange"]},data:function(){var e;return a(e={openFold:!0,select:"父节点(father)",moveLevel:!1,editable:!1,showAdd:!1,temp_name:"",temp_label:"新节点",temp_selectable:!0,current:null,defaultProps:{children:"children",label:"label"},menuTree:[{label:"依赐诺网络科技",id:1,system:!0,children:[{label:"技术研发部",id:2,system:!1}]},{label:"国际软件公司",id:7,system:!1,children:[{label:"市场运维部",id:8,system:!1}]},{id:9,label:"广州基楚科技",system:!1,children:[{id:10,system:!1,label:"北京科电有限公司"}]}]},"defaultProps",{children:"children",label:"label"}),a(e,"rules",{name:[{trigger:"blur",required:!0}],label:[{trigger:"blur",required:!0}]}),e},mounted:function(){this.onItemClick(this.menuTree[0])},methods:{editMenu:function(){this.editable=!0},saveMenu:function(){var e=this,t=[],i=[],a=[];this.findResult(this.categories,t,i,a,null),menuTree.batchUpdate(t,i,a).then(function(t){e.$message({message:"保存成功",type:"success"}),e.editable=!1,e.$emit("reloadTree")})},cancelSave:function(){var e=this;this.$confirm("是否取消?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){e.editable=!1,e.$emit("reloadTree")}).catch(function(){})},addClick:function(e,t){this.onItemClick(t),this.onAddConfirm()},addfater:function(){this.menuTree.push({label:"新节点",id:"",system:!1,children:[]})},moveUp:function(e,t){this.onItemClick(t);var i=void 0,a=void 0;if(e.level>1){var l=e.parent;i=l.data.children,a=l.childNodes}else{var n=e.parent;i=this.categories,a=n.childNodes}var s=i.findIndex(function(e){return e.name===t.name});if(s>0){var o=i[s],r=i[s-1];this.$set(i,s-1,o),this.$set(i,s,r);var c=a[s-1],d=a[s];this.$set(a,s-1,d),this.$set(a,s,c),this.addUpdate(t),this.addUpdate(r),this.resetTree()}},moveDown:function(e,t){this.onItemClick(t);var i=void 0,a=void 0;if(e.level>1){var l=e.parent;i=l.data.children,a=l.childNodes}else{var n=e.parent;i=this.categories,a=n.childNodes}var s=i.findIndex(function(e){return e.name===t.name});if(s<i.length){var o=i[s],r=i[s+1];this.$set(i,s+1,o),this.$set(i,s,r);var c=a[s+1],d=a[s];this.$set(a,s+1,d),this.$set(a,s,c),this.addUpdate(t),this.addUpdate(r),this.resetTree()}},moveLeft:function(e,t){this.onItemClick(t);var i=void 0,a=void 0;i=e.parent.data.children,a=e.parent.parent.data.children;var l=i.findIndex(function(e){return e.name===t.name}),n=i[l];i.splice(l,1),a.push(n),this.addUpdate(t),this.resetTree()},moveRight:function(e,t){this.onItemClick(t);var i=e.parent.data.children,a=i.findIndex(function(e){return e.name===t.name});if(a>0){var l=i[a],n=i[a-1].children;i.splice(a,1),n.push(l),this.addUpdate(t),this.resetTree()}},onItemClick:function(e){this.current!=e&&(this.current=e,this.$emit("current",this.current)),1==this.editable&&(this.addUpdate(e),this.resetTree())},onAddConfirm:function(){var e={name:this.temp_name,label:this.temp_label,type:"url",selectable:this.temp_selectable,description:"",icon:"",parent:this.current.name,system:!1,url:"",module:""};this.current.children.push(e)},closeAdd:function(){this.temp_name="",this.temp_label="",this.temp_selectable=!0,this.showAdd=!1},addUpdate:function(e){null!=e.id&&1==this.editable&&(e.updated=!0)},findResult:function(e,t,i,a,l){for(var n=0;n<e.length;n++){var s=e[n];null==s.id?t.push(s):1==s.deleted?a.push(s.name):1!=s.updated&&s.position==n||(s.position=n,null!=l&&(s.parent=l),i.push(s)),null!=s.children&&s.children.length>0&&this.findResult(s.children,t,i,a,s.name)}},resetTree:function(){this.editable=!1,this.editable=!0}},watch:{editable:function(e){1==e&&null!=this.current&&(this.current.updated=!0),this.$emit("statusChange",e)}}},n=(i("8k/W"),i("EKkH"),i("MsfJ"),i("2iHq"),i("KHd+")),s=Object(n.a)(l,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-container",{staticClass:"sub"},[i("el-header",[i("itsnow-text",{staticStyle:{width:"100px"}}),e._v(" "),i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:function(e){}}}),e._v(" "),e.openFold?i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder-opened"},on:{click:function(t){e.openFold=!1}}}):e._e(),e._v(" "),e.openFold?e._e():i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder"},on:{click:function(t){e.openFold=!0}}}),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[0==e.editable?i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"},on:{click:e.editMenu}}):e._e()],1),e._v(" "),1==e.editable?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"top-start"}},[i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"iconfont iconbaocun"},on:{click:e.saveMenu}})],1):e._e(),e._v(" "),1==e.editable?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"全部还原",placement:"top-start"}},[i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-refresh-left"},on:{click:e.cancelSave}})],1):e._e(),e._v(" "),1==e.editable?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增根节点",placement:"top-start"}},[i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addfater}})],1):e._e()],1),e._v(" "),i("el-main",[i("el-aside",{staticClass:"its_tree"},[i("el-tree",{attrs:{data:e.menuTree,props:e.defaultProps,"node-key":"id","default-checked-keys":[1],"highlight-current":!0},on:{"node-click":e.onItemClick},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.node,l=t.data;return i("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[i("el-row",[i("el-col",{attrs:{span:12}},[1==l.deleted?i("span",{staticStyle:{"text-decoration":"line-through"}},[e._v(e._s(a.label))]):null==l.id?i("span",[e._v(e._s(a.label))]):1==l.updated?i("span",[e._v("*"+e._s(a.label))]):i("span",[e._v(e._s(a.label))])]),e._v(" "),i("el-col",{attrs:{span:12}},[1==e.editable&&1!=l.deleted?i("el-row",[i("el-col",{attrs:{span:3}},[i("i",{staticClass:"el-icon-plus",on:{click:function(t){return e.addClick(a,l)}}})]),e._v(" "),0==l.system?i("el-col",{attrs:{span:3}},[i("i",{staticClass:"el-icon-delete"})]):e._e()],1):e._e()],1)],1)],1)}}])})],1)],1)],1),e._v(" "),e.showAdd?i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增菜单",visible:e.showAdd},on:{"update:visible":function(t){e.showAdd=t}}},[i("div",{staticClass:"its_det"},[i("el-row",{staticClass:"its_form_row"},[i("el-form",{attrs:{"label-width":"80px",rules:e.rules}},[i("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[i("el-col",{attrs:{span:10,offset:1}},[i("el-form-item",{attrs:{label:"菜单标识",prop:"name"}},[i("el-input",{model:{value:e.temp_name,callback:function(t){e.temp_name=t},expression:"temp_name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10,offset:1}},[i("el-form-item",{attrs:{label:"菜单名称",prop:"label"}},[i("el-input",{model:{value:e.temp_label,callback:function(t){e.temp_label=t},expression:"temp_label"}})],1)],1)],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.onAddConfirm}},[e._v("确 定")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.closeAdd}},[e._v("取 消")])],1)]):e._e(),e._v(" "),i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"移动",visible:e.moveLevel,width:"500px"},on:{"update:visible":function(t){e.moveLevel=t}}},[i("div",{staticClass:"its_det"},[i("el-row",{staticClass:"its_form_row"},[i("el-form",{attrs:{"label-width":"80px",rules:e.rules}},[i("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[i("el-col",{attrs:{span:21,offset:1}},[i("el-form-item",{attrs:{label:"当前节点"}},[i("el-input",{attrs:{value:"技术研发部",disabled:""}})],1)],1),e._v(" "),i("el-col",{attrs:{span:21,offset:1}},[i("el-form-item",{attrs:{label:"关联节点"}},[i("el-autocomplete",{staticClass:"input-with-select",attrs:{placeholder:"请选择"},model:{value:e.input3,callback:function(t){e.input3=t},expression:"input3"}},[i("el-select",{staticStyle:{width:"130px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.select,callback:function(t){e.select=t},expression:"select"}},[i("el-option",{attrs:{label:"父节点(father)",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"前一个(before)",value:"2"}}),e._v(" "),i("el-option",{attrs:{label:"后一个(after)",value:"3"}})],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.moveLevel=!1}}},[e._v("确 定")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.moveLevel=!1}}},[e._v("取 消")])],1)])],1)},[],!1,null,"d571ec9e",null);t.default=s.exports},"8k/W":function(e,t,i){"use strict";var a=i("FGpP");i.n(a).a},"92J+":function(e,t,i){},Ayy5:function(e,t,i){},EKkH:function(e,t,i){"use strict";var a=i("yNaN");i.n(a).a},FGpP:function(e,t,i){},MsfJ:function(e,t,i){"use strict";var a=i("Ayy5");i.n(a).a},yNaN:function(e,t,i){}}]);