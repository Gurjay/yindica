(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2680","9kT/","Ff/F","Z6R/"],{"9kT/":function(e,t,n){"use strict";function a(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),e.associations||(e.associations="department,company"),e.order||(e.order="updateTime desc"),itsmRequest({url:"/api/v1/ci/UserView",method:"get",params:e})}function r(e,t){return t||(t={}),t.associations||(t.associations="roles,department,company,groups"),itsmRequest({url:"/api/v1/ci/UserView/"+e,method:"get",params:t})}function o(){return itsmRequest({url:"/api/v1/ci/Person/count/byCompany",method:"get"})}function i(e){return itsmRequest({url:"/api/v1/ci/Person/count/byDepartment/"+e,method:"get"})}function l(e){return itsmRequest({url:"/api/v1/ci/Person",method:"post",data:e})}function s(e){return itsmRequest({url:"/api/v1/ci/Person/"+e.id,method:"put",data:e})}function u(e){return itsmRequest({url:"/api/v1/ci/Person/"+e,method:"delete"})}function d(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),itsmRequest({url:"/api/v1/ci/TitleEnum",method:"get",params:e})}function c(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),itsmRequest({url:"/api/v1/ci/AccountTypeEnum",method:"get",params:e})}function p(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),itsmRequest({url:"/api/v1/ci/AccountStateEnum",method:"get",params:e})}function m(e){return itsmRequest({url:"/api/v1/passopen/send/"+e+"/pin",method:"get"})}function g(e){e||(e={});var t={};return e.pageIndex?t.pageNum=e.pageIndex:t.pageNum=1,e.pageSize?t.pageSize=e.pageSize:t.pageSize=10,t.where=e.where,passportRequest({url:"/api/v2/users",method:"get",params:t})}function f(e){return passportRequest({url:"/api/v2/users/"+e,method:"get"})}function b(e){return passportRequest({header:"itsm",url:"/api/v2/users",method:"post",data:e})}function v(e){return passportRequest({url:"/api/v2/users/"+e.id,method:"put",data:e})}function h(e){return passportRequest({url:"/api/v2/users/"+e,method:"delete"})}function y(e){return passportRequest({url:"/api/v2/users/"+e+"/status",method:"put",params:{value:"unlock"}})}function w(e){return passportRequest({url:"/api/v2/users/"+e+"/status",method:"put",params:{value:"lock"}})}function x(e){return passportRequest({url:"/api/v2/users/"+e+"/exit",method:"put"})}function _(e){return passportRequest({url:"/api/v2/users/"+e+"/roles",method:"get"})}function q(e,t){return passportRequest({url:"/api/v2/users/"+e+"/roles/"+t,method:"post"})}function O(e,t){return passportRequest({url:"/api/v2/users/"+e+"/roles/"+t,method:"delete"})}function D(e){return passportRequest({url:"/api/v2/users/"+e+"/orgs",method:"get"})}n.r(t),n.d(t,"queryPerson",function(){return a}),n.d(t,"getPerson",function(){return r}),n.d(t,"countPersonByCompany",function(){return o}),n.d(t,"countPersonByDepartment",function(){return i}),n.d(t,"addPerson",function(){return l}),n.d(t,"updatePerson",function(){return s}),n.d(t,"deletePerson",function(){return u}),n.d(t,"queryTitleEnum",function(){return d}),n.d(t,"queryAccountTypeEnum",function(){return c}),n.d(t,"queryAccountStateEnum",function(){return p}),n.d(t,"sendPin",function(){return m}),n.d(t,"queryUser",function(){return g}),n.d(t,"getUser",function(){return f}),n.d(t,"addUser",function(){return b}),n.d(t,"updateUser",function(){return v}),n.d(t,"deleteUser",function(){return h}),n.d(t,"enableUser",function(){return y}),n.d(t,"disableUser",function(){return w}),n.d(t,"exitUser",function(){return x}),n.d(t,"queryRoleByUser",function(){return _}),n.d(t,"addRoleByUser",function(){return q}),n.d(t,"deleteRoleByUser",function(){return O}),n.d(t,"queryOrgByUser",function(){return D})},"Ff/F":function(e,t,n){"use strict";n.r(t),n.d(t,"queryCompany",function(){return r}),n.d(t,"addCompany",function(){return o}),n.d(t,"updateCompany",function(){return i}),n.d(t,"deleteCompany",function(){return l}),n.d(t,"getCompany",function(){return s}),n.d(t,"queryCompanySortEnum",function(){return u}),n.d(t,"queryCompanyLogoEnum",function(){return d});var a=n("v0Ws");function r(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),e.pageSize||(e.pageSize=-1),Object(a.d)({url:"/api/v1/ci/Company",method:"get",params:e})}function o(e){return Object(a.d)({url:"/api/v1/ci/Company",method:"post",data:e})}function i(e){return Object(a.d)({url:"/api/v1/ci/Company/"+e.id,method:"put",data:e})}function l(e){return Object(a.d)({url:"/api/v1/ci/Company/"+e,method:"delete"})}function s(e){return Object(a.d)({url:"/api/v1/ci/Company/"+e,method:"get"})}function u(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),Object(a.d)({url:"/api/v1/ci/CompanySortEnum",method:"get",params:e})}function d(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),Object(a.d)({url:"/api/v1/ci/CompanyLogoEnum",method:"get",params:e})}},FrB6:function(e,t,n){"use strict";n.r(t);var a=n("YTpH"),r=n("Z6R/"),o=n("9kT/"),i=n("Ff/F"),l=(n("LvDl"),n("Smy8")),s=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}([""],[""]);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={components:{VueContext:a.VueContext},data:function(){var e,t,n,a,o=this;return u(a={openFold:!0,treeID:"1",userForm:{name:"",shortname:"",type:"N",userEnabled:!0,expireDateRange:[],useState:"2",sex:"M",fullname:"",nickname:"",title:"",mobile:"",workPhone:"",identification:"",birthday:null,district:"",street:"",nativePlace:"",nativePlaceAddress:"",portrait:[],weixin:"",email:"",qq:"",im:"",company:{}},rolesDialogVisible:!1,accountTypeOptions:[],counvertExpired:0,roleSelected:[],roleEditSelected:[],roleDeleted:[],listRoleQuery:{},person:{},editable:!1,addable:!1,tenantName:"",pageModel:{config:{selectionMode:"single",readonly:!1,columns:[{name:"departmentLabel",label:"部门",minwidth:"350"},{name:"realName",label:"姓名",type:"link",minwidth:"100",router:{url:"/setting/org/view/{id}",params:["id"]}},{name:"mobile",label:"手机号",width:"100"},{name:"title",label:"岗位",width:"100"}],actionWidth:"60",actions:[{name:"edit",label:"编辑"}]},page:[{company:"上海伊赐诺网络科技有限公司",departmentLabel:"技术研发部",realName:"张三",label:"依赐诺_张三",mobile:"13254541254",title:"架构师",account:"itsnow:zhangsan"},{company:"上海瑞华科技",departmentLabel:"运维部门",realName:"王多多",label:"王多鱼2号",mobile:"18823655632",title:"程序员",account:"ruihuakeji:wangduoyu"},{company:"深圳院里有限公司",departmentLabel:"客户服务部门",realName:"树先生",label:"工程师-张师傅",mobile:"17754122563",title:"程序员",account:"shenzhenyuanli:shu"}]},roleEditPageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"角色标识",minwidth:"200"},{name:"label",label:"角色名称",minwidth:"200"},{name:"description",label:"描述",minwidth:"350"},{name:"status",label:"标记",minwidth:"100"},{name:"updated",label:"更新日期",minwidth:"150"}],actionWidth:"60",actions:[{name:"delete",label:"删除"}]},page:[{name:"user",label:"普通用户",status:"系统",updated:"2019-10-19 12:00:00"}]},rolePageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"角色标识",width:"200"},{name:"label",label:"角色名称",width:"200"},{name:"description",label:"描述",minWidth:"350"},{name:"status",label:"标记",width:"100",type:"template"},{name:"updated",label:"更新日期",width:"150",type:"date"}]},page:[]},rules:{realName:[{required:!0,message:"请输入账户名称",trigger:"blur"}],shortname:[{required:!0,message:"请输入账户名称",trigger:"blur"},{pattern:/^[a-z0-9_]{3,20}$/,message:"支持小写字母、数字、下划线，须字母开头！",trigger:"blur"},{min:3,max:20,message:"长度3~20个字符",trigger:"blur"}],type:[{required:!0,message:"请选拔账户类型",trigger:"blur"}],fullname:[{max:50,message:"长度不超过50个字符",trigger:"blur"}],nickname:[{pattern:/^[a-zA-Z0-9_:\-\(\)\[\]\{\}\u4E00-\u9FA5（）【】]*$/,message:"支持字母、数字、汉字及‘-_[](){}’组合，长度不超过20！",trigger:"blur"}],workPhone:[{max:20,message:"长度不超过20个字符",trigger:"blur"}],identification:[{pattern:/^(([1-9]\d{14})|([1-9]\d{16}(\d|X|x)))$/,message:"请输入正确的身份证号码！",trigger:"blur"}],street:[{max:100,message:"长度不超过100个字符",trigger:"blur"}],nativePlaceAddress:[{max:100,message:"长度不超过100个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1(3[0-9]|4[579]|5[0-35-9]|6[56]|7[0-8]|8[0-9]|9[189])\d{8}$/,message:"请输入正确的手机号码！",trigger:"blur"}],qq:[{pattern:/^(([1-9]\d{4,10})|([A-Za-z\d]+([\-_\.][A-Za-z\d]+)*@([A-Za-z\d]+[\-\.])+[A-Za-z\d]{2,5}))$/,message:"请输入正确的QQ号码！",trigger:"blur"}],im:[{max:50,message:"长度不超过50个字符",trigger:"blur"}],weixin:[{pattern:/^([1-9]\d{4,10})|([a-zA-Z][a-zA-Z\d_\-]{5,19})$/,message:"请输入正确的微信号码！",trigger:"blur"}],email:[{pattern:/^[A-Za-z\d]+([\-_\.][A-Za-z\d]+)*@([A-Za-z\d]+[\-\.])+[A-Za-z\d]{2,5}$/,message:"请输入正确的email！",trigger:"blur"}]},activeNames:["1","2","3"],openAccount:!1,treeList:[{value:1,label:"所有(14)",id:0,children:[{value:2,label:"依赐诺网络(4)",id:1,children:[{value:2,label:"技术研发部(2)",id:2},{value:2,label:"市场运维部(2)",id:3}]},{label:"国际软件公司(2)",value:2,id:7,children:[{label:"市场部门(2)",value:2,id:8}]},{label:"广州基楚科技(4)",value:2,id:7,children:[{label:"北京科电有限公司(3)",value:2,id:8}]},{label:"个人(4)",value:3,id:9}]}],resize:0},"pageModel",{config:{selectionMode:"selection",readonly:!1,columns:[(e={name:"realName",label:"姓名",minwidth:"200",type:"link"},u(e,"minwidth","200"),u(e,"router",{url:"/setting/org/view/{id}",params:["id"]}),e),{name:"sex",label:"性别",minwidth:"100"},{name:"departmentLabel",label:"部门",minwidth:"250"},{name:"account",label:"账户",type:"template",minwidth:"200"},{name:"updateTime",label:"更新时间",minwidth:"160",type:"date"}],actionWidth:"90",actions:[{name:"open",label:"开通账户",isExclusion:!0,icon:"el-icon-circle-check",validation:function(e){return"--"==e.account}},{name:"close",label:"关闭账户",isExclusion:!0,icon:"el-icon-circle-close",validation:function(e){return"--"!=e.account}},{name:"edit",icon:"el-icon-edit",label:"编辑",type:"text"},{name:"delete",label:"删除",icon:"el-icon-delete",type:"text"}]},page:[]}),u(a,"pageModel2",{config:{selectionMode:"selection",readonly:!1,columns:[(t={name:"realName",label:"姓名",minwidth:"200",type:"link"},u(t,"minwidth","200"),u(t,"router",{url:"/setting/org/view/{id}",params:["id"]}),t),{name:"sex",label:"性别",minwidth:"100"},{name:"account",label:"账户",type:"template",minwidth:"200"},{name:"updateTime",label:"更新时间",minwidth:"160",type:"date"}],actionWidth:"90",actions:[{name:"open",label:"开通账户",isExclusion:!0,icon:"el-icon-circle-check",validation:function(e){return"--"==e.account}},{name:"close",label:"关闭账户",isExclusion:!0,icon:"el-icon-circle-close",validation:function(e){return"--"!=e.account}},{name:"edit",icon:"el-icon-edit",label:"编辑",type:"text"},{name:"delete",label:"删除",icon:"el-icon-delete",type:"text"}]},page:[]}),u(a,"pageModel1",{config:{selectionMode:"selection",readonly:!1,columns:[(n={name:"realName",label:"姓名",minwidth:"200",type:"link"},u(n,"minwidth","200"),u(n,"router",{url:"/setting/org/view/{id}",params:["id"]}),n),{name:"sex",label:"性别",minwidth:"100"},{name:"Tenant",label:"公司",minwidth:"250"},{name:"departmentLabel",label:"部门",minwidth:"350"},{name:"account",label:"账户",type:"template",minwidth:"200"},{name:"updateTime",label:"更新时间",minwidth:"160",type:"date"}],actionWidth:"90",actions:[{name:"open",label:"开通账户",isExclusion:!0,icon:"el-icon-circle-check",validation:function(e){return"--"==e.account}},{name:"close",label:"关闭账户",isExclusion:!0,icon:"el-icon-circle-close",validation:function(e){return"--"!=e.account}},{name:"edit",icon:"el-icon-edit",label:"编辑",type:"text"},{name:"delete",label:"删除",icon:"el-icon-delete",type:"text"}]},page:[]}),u(a,"treeConfig",{lazy:!0}),u(a,"treeProps",{children:"children",label:"label"}),u(a,"selectedInfo",{}),u(a,"deptFormRules",{label:[{required:!0,message:"请输入部门名称",trigger:"blur"},{validator:function(e,t,n){var a=o,i={};i=o.deptForm.id?{where:"label='"+t+"' and id!="+o.deptForm.id+" and company.label='"+o.deptForm.company.label+"'"}:{where:"label='"+t+"' and company.label='"+o.deptForm.company.label+"'"},Object(r.queryDepartment)(i).then(function(e){e.body.length>0?n(new Error("部门名称已存在")):n()}).catch(function(e){a.$message.error(e)})},trigger:"blur"}]}),u(a,"orgFormRules",{name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{validator:function(e,t,n){var a=o,i={};i=o.orgForm.id?{where:"label='"+t+"' and id!="+o.orgForm.id}:{where:"label='"+t+"'"},Object(r.queryOrg)(i).then(function(e){e.body.length>0?n(new Error("组织名称已存在")):n()}).catch(function(e){a.$message.error(e)})},trigger:"blur"}]}),u(a,"form",{resource:""}),u(a,"deptForm",{resource:"1"}),u(a,"orgForm",{resource:"1"}),u(a,"updateOrgForm",{}),u(a,"formLabelWidth","80px"),u(a,"renameDeptDialogVisible",!1),u(a,"addDeptDialogVisible",!1),u(a,"renameOrgDialogVisible",!1),u(a,"addOrgDialogVisible",!1),u(a,"treeNode",[]),u(a,"deptLevelOptions",[{label:"新增部门",value:"0"},{label:"新增子部门",value:"1"}]),u(a,"queryList",{}),u(a,"treeResolve",function(){}),u(a,"deptLevelVisible",!0),u(a,"validateFunc",function(e,t){return("Company"!==e.classType||"重命名"!==t.label)&&("Company"!==e.classType||"删除"!==t.label)}),u(a,"selected",[]),u(a,"topButtonsMap",{}),u(a,"companyId",""),a},mounted:function(){this.pageModel.page=l.origin,this.pageModel2.page=l.origin,this.pageModel1.page=l.origin},watch:{},methods:{handleNodeClick:function(e){this.treeID=e.value,console.log(e.value,"vvvvvvvvvvvvvvvvv")},queryDepartment:function(){var e=this;this.treeList=[];var t={order:"updateTime desc",associations:"departments"};Object(i.queryCompany)(t).then(function(t){for(var n=function(n){var a=t.body[n];if("0"===a.status)Object(r.queryOrg)().then(function(t){a.children=t.data.rows,e.treeList.push(a)});else{var o={};o.where="company.id="+a.id,Object(r.queryDepartment)(o).then(function(t){for(var n=[],r=0;r<t.body.length;r++)t.body[r].parent||n.push(t.body[r]);a.children=n,e.treeList.push(a)})}},a=0;a<t.body.length;a++)n(a)})},addDepartment:function(){var e=this;this.$refs.deptForm.validate(function(t){t&&new Promise(function(t,n){e.selectedInfo.node&&"Company"===e.selectedInfo.node.classType?t(e.selectedInfo.node):e.selectedInfo.node&&"Company"!==e.selectedInfo.node.classType&&Object(r.getDepartment)(e.selectedInfo.node.id).then(function(n){"1"===e.deptForm.resource?(e.deptForm.parent=n,e.deptForm.parentOrgId=n.unionId):(e.deptForm.parent=n.parent,e.deptForm.parentOrgId=n.parent?n.parent.unionId:null),t(n.company)})}).then(function(t){"0"===t.sort[0]?(e.deptForm.name=e.deptForm.label,Object(r.addOrg)(e.deptForm).then(function(){e.$message.success("新增部门成功"),e.refreshTreeNode(),e.addDeptDialogVisible=!1})):Object(r.addDepartment)(e.deptForm).then(function(){e.$message.success("新增部门成功"),e.refreshTreeNode(),e.addDeptDialogVisible=!1})})})},addOrg:function(){var e=this;this.$refs.orgForm.validate(function(t){t&&(e.selectedInfo.node&&"Company"!==e.selectedInfo.node.classType&&("1"===e.orgForm.resource?e.orgForm.parentOrgId=e.selectedInfo.node.gorgId:e.orgForm.parentOrgId=e.selectedInfo.node.parentOrgId),Object(r.addOrg)(e.orgForm).then(function(t){e.$message.success("新增部门成功"),e.refreshTreeNode(),e.addOrgDialogVisible=!1},function(t){e.$message.error(t)}))})},updateDepartment:function(){var e=this;this.$refs.deptForm.validate(function(t){t&&Object(r.updateDepartment)(e.deptForm).then(function(t){e.$message.success("更新部门成功"),e.refreshTreeNode(),e.renameDeptDialogVisible=!1},function(t){e.$message.error(t)})})},updateOrg:function(){var e=this;this.$refs.updateOrgForm.validate(function(t){t&&Object(r.updateOrg)(e.updateOrgForm).then(function(t){e.$message.success("更新部门成功"),e.refreshTreeNode(),e.renameOrgDialogVisible=!1},function(t){e.$message.error(t)})})},deleteDepartment:function(e){var t=this;return new Promise(function(n,a){Object(r.deleteDepartment)(e).then(function(e){t.refreshTreeNode(),n(e)}).catch(function(e){a(e)})})},deleteOrg:function(e){var t=this;return new Promise(function(n,a){Object(r.deleteOrg)(e).then(function(e){t.refreshTreeNode(),n(e)}).catch(function(e){a(e)})})},rowAction:function(e,t,n){var a=this;"edit"===e?this.$router.push({name:"personEdit",params:{id:n.id}}):"delete"===e?this.$confirm("此操作将永久删除, 是否继续?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){Object(o.deletePerson)(n.id).then(function(){a.loadPage(a.queryList.pageIndex,a.queryList.pageSize),a.$message.success("删除成功!")})}):"open"===e?this.openAccount=!0:"close"===e&&this.$confirm("确认关闭该账号?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){return a.$message.success("关闭账户成功!")})},loadDepartmentNode:function(e,t){var n=this;if(0===e.level)Object(i.queryCompany)().then(function(a){Object(o.countPersonByCompany)().then(function(r){n.treeNode=e,n.treeResolve=t;for(var o=0;o<a.body.length;o++)""(s)(s)(s),a.body[o].extendLabel="("+r[a.body[o].id]+")";return t(a.body)})});else if(1===e.level){new Promise(function(e,t){e(!0)}).then(function(){var n={};n.where="company.id="+e.data.id+" and parent is null",Object(r.queryDepartment)(n).then(function(n){Object(o.countPersonByDepartment)(e.data.id).then(function(e){for(var a=0;a<n.body.length;a++)n.body[a].extendLabel="("+e[n.body[a].id]+")";return t(n.body)})})})}else{var a={};a.where="parent.id="+e.data.id,Object(r.queryDepartment)(a).then(function(e){if(!e.body||e.body.length<1)return t(e.body);Object(o.countPersonByDepartment)(e.body[0].company.id).then(function(n){for(var a=0;a<e.body.length;a++)e.body[a].extendLabel="("+n[e.body[a].id]+")";return t(e.body)})})}},refreshTreeNode:function(){this.treeNode.childNodes=[],this.loadDepartmentNode(this.treeNode,this.treeResolve)},hasSelected:function(e){this.selected=e},initTopButton:function(){var e=this;this.topButtonsMap={add:{name:"add",label:"新增",action:function(t){e.$router.push({name:"personAddOfOrg"})},noLoading:!0,noNeedSelect:!0},close:{name:"close",label:"关闭",noNeedLoop:!0,action:function(t){for(var n=[],a=0;a<t.length;a++)n.push(Object(o.deletePerson)(t[a].id));Promise.all(n).then(function(){return e.loadPage(e.queryList.pageIndex,e.queryList.pageSize)})},noLoading:!0,confirm:"确定要关闭?",noNeedSelect:!0},remove:{name:"remove",label:"删除",noNeedLoop:!0,action:function(t){for(var n=[],a=0;a<t.length;a++)n.push(Object(o.deletePerson)(t[a].id));Promise.all(n).then(function(){return e.loadPage(e.queryList.pageIndex,e.queryList.pageSize)})},noLoading:!0,confirm:"确定要删除选中的实例?",noNeedSelect:!0},exp:{name:"export",label:"导出",action:function(){},noLoading:!1,noNeedSelect:!0},imp:{name:"import",label:"导入",action:function(){},noLoading:!1,noNeedSelect:!0}}}}},c=(n("K/J3"),n("KHd+")),p=Object(c.a)(d,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"app-container ilayout-container"},[n("split-pane",{staticClass:"its_split",attrs:{"min-percent":10,"default-percent":20,split:"vertical"},on:{resize:e.resize}},[n("template",{slot:"paneL"},[n("el-container",{staticClass:"its_container sub"},[n("el-header",[n("itsnow-text",{staticStyle:{width:"100px"}}),e._v(" "),n("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:function(e){}}}),e._v(" "),e.openFold?n("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder-opened"},on:{click:function(t){e.openFold=!1}}}):e._e(),e._v(" "),e.openFold?e._e():n("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder"},on:{click:function(t){e.openFold=!0}}})],1),e._v(" "),n("el-main",[n("el-aside",{staticClass:"its_tree",staticStyle:{"min-width":"auto"}},[n("el-tree",{attrs:{data:e.treeList,"default-expanded-keys":[0],props:e.defaultProps,"node-key":"id","highlight-current":""},on:{"node-click":e.handleNodeClick}})],1)],1)],1)],1),e._v(" "),n("template",{slot:"paneR"},[n("el-container",{staticClass:"its_container sub"},[n("el-header",["1"==e.treeID?n("router-link",{attrs:{to:"/setting/org/add"}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1):e._e(),e._v(" "),"2"==e.treeID?n("router-link",{attrs:{to:"/setting/org/add2"}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1):e._e(),e._v(" "),"3"==e.treeID?n("router-link",{attrs:{to:"/setting/org/add3"}},[n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1):e._e(),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("关闭")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("删除")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("导入")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("导出")])],1),e._v(" "),n("el-main",["1"==e.treeID?n("itsnow-filter-page-list",{on:{rowAction:e.rowAction,loadPage:e.loadPage,selected:e.hasSelected},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return["account"==t.column.name?n("div",["--"==a.account?n("span",[e._v("--")]):n("span",[n("a",[e._v(e._s(a.account))])])]):e._e()]}}],null,!1,3185870679),model:{value:e.pageModel1,callback:function(t){e.pageModel1=t},expression:"pageModel1"}}):e._e(),e._v(" "),"2"==e.treeID?n("itsnow-filter-page-list",{on:{rowAction:e.rowAction,loadPage:e.loadPage,selected:e.hasSelected},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return["account"==t.column.name?n("div",["--"==a.account?n("span",[e._v("--")]):n("span",[n("a",[e._v(e._s(a.account))])])]):e._e()]}}],null,!1,3185870679),model:{value:e.pageModel,callback:function(t){e.pageModel=t},expression:"pageModel"}}):e._e(),e._v(" "),"3"==e.treeID?n("itsnow-filter-page-list",{on:{rowAction:e.rowAction,loadPage:e.loadPage,selected:e.hasSelected},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return["account"==t.column.name?n("div",["--"==a.account?n("span",[e._v("--")]):n("span",[n("a",[e._v(e._s(a.account))])])]):e._e()]}}],null,!1,3185870679),model:{value:e.pageModel2,callback:function(t){e.pageModel2=t},expression:"pageModel2"}}):e._e()],1),e._v(" "),n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"开通",visible:e.openAccount,width:"690px","close-on-click-modal":!1},on:{"update:visible":function(t){e.openAccount=t}}},[n("el-collapse",{staticClass:"its_collapse",staticStyle:{padding:"5px"},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-form",{ref:"userForm",attrs:{"label-width":"80px",model:e.userForm,rules:e.rules}},[n("div",{staticClass:"its_det",staticStyle:{"margin-bottom":"5px"}},[n("el-row",{staticClass:"its_form_row"},[n("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[n("el-collapse-item",{staticStyle:{"min-height":"30px"},attrs:{title:"基本信息",name:"1"}},[n("div",{staticClass:"clearfix its_card_header"}),e._v(" "),n("el-row",{staticClass:"its_card_body"},[n("el-col",{attrs:{span:10,offset:1}},[n("el-form-item",{attrs:{label:"账户",prop:"shortname"}},[n("itsnow-text",{model:{value:e.userForm.shortname,callback:function(t){e.$set(e.userForm,"shortname",t)},expression:"userForm.shortname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"昵称"}},[n("itsnow-text",{model:{value:e.userForm.nickname,callback:function(t){e.$set(e.userForm,"nickname",t)},expression:"userForm.nickname"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[n("itsnow-text",{model:{value:e.mobileNumber,callback:function(t){e.mobileNumber=t},expression:"mobileNumber"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[n("itsnow-text")],1)],1),e._v(" "),n("el-col",{attrs:{span:10,offset:1}},[n("el-form-item",{attrs:{label:"账户类型"}},[n("itsnow-select",{attrs:{value:"子账户",disabled:""}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("itsnow-text",{attrs:{value:"解锁",readonly:""}})],1),e._v(" "),n("el-form-item",{attrs:{"label-width":"80px",label:"人员"}},[n("el-col",{attrs:{span:24}},[n("el-input",{attrs:{disabled:"",value:"张三"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"its_det"},[n("el-row",{staticClass:"its_form_row",staticStyle:{width:"100%"}},[n("el-col",{attrs:{span:24,offset:0}},[n("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[n("el-collapse-item",{attrs:{title:"关联角色",name:"3"}},[n("div",{staticClass:"clearfix its_card_header"}),e._v(" "),n("el-row",{staticClass:"its_card_body"},[n("div",{staticClass:"filter-container"},[n("el-col",{staticStyle:{padding:"5px 0","padding-left":"6px","border-bottom":"1px solid #cfd2d6"},attrs:{span:24}},[n("el-button",{staticStyle:{padding:"3px"},attrs:{plain:"",type:"text",size:"mini"},on:{click:e.openRoleDialog}},[e._v("新增\n                              ")]),e._v(" "),n("el-button",{staticStyle:{padding:"3px"},attrs:{plain:"",type:"text",size:"mini"},on:{click:e.deleteRole}},[e._v("删除\n                              ")])],1)],1),e._v(" "),n("itsnow-list",{attrs:{config:e.roleEditPageModel.config},on:{rowAction:e.roleEditRowAction,selected:e.hasRoleEditSelected},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return["status"==t.column.name?n("div",["system"==a.status?n("span",[e._v("系统")]):n("span",[e._v("自定义")])]):e._e()]}}]),model:{value:e.roleEditPageModel.page,callback:function(t){e.$set(e.roleEditPageModel,"page",t)},expression:"roleEditPageModel.page"}})],1)],1)],1)],1)],1)],1),e._v(" "),n("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.rolesDialogVisible,title:"角色",width:"800px"},on:{"update:visible":function(t){e.rolesDialogVisible=t}}},[n("el-form",[n("el-row",[n("el-col",{attrs:{span:24}},[n("itsnow-filter-page-list",{on:{loadPage:e.loadRolePage,selected:e.hasRoleSelected},scopedSlots:e._u([{key:"row",fn:function(t){var a=t.row;return["status"==t.column.name?n("div",["system"==a.status?n("span",[e._v("系统")]):n("span",[e._v("自定义")])]):e._e()]}}]),model:{value:e.rolePageModel,callback:function(t){e.rolePageModel=t},expression:"rolePageModel"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.rolesDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.openAccount=!1}}},[e._v("确 定")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.openAccount=!1}}},[e._v("取 消")])],1)],1)],1)],1)],2)],1)},[],!1,null,null,null);t.default=p.exports},"K/J3":function(e,t,n){"use strict";var a=n("Y7cH");n.n(a).a},Y7cH:function(e,t,n){},"Z6R/":function(e,t,n){"use strict";function a(e){return e||(e={}),e.pageIndex=0,e.pageSize=-1,e.associations="children,parent,company",itsmRequest({url:"/api/v1/ci/Department",method:"get",params:e})}function r(e){var t={associations:"parent,company"};return itsmRequest({url:"/api/v1/ci/Department/"+e,method:"get",params:t})}function o(e){return itsmRequest({url:"/api/v1/ci/Department",method:"post",data:e})}function i(e){return itsmRequest({url:"/api/v1/ci/Department/"+e.id,method:"put",data:e})}function l(e){return itsmRequest({url:"/api/v1/ci/Department/"+e,method:"delete"})}function s(e){e||(e={});var t={};return e.pageIndex?t.pageNum=e.pageIndex:t.pageNum=1,e.pageSize?t.pageSize=e.pageSize:t.pageSize=10,passportRequest({url:"/api/v2/orgs",method:"get",params:t})}function u(e){return passportRequest({url:"/api/v2/orgs/"+e,method:"get"})}function d(e){return passportRequest({url:"/api/v2/orgs",method:"post",data:e})}function c(e){return passportRequest({url:"/api/v2/orgs/"+e.id,method:"put",data:e})}function p(e){return passportRequest({url:"/api/v2/orgs/"+e,method:"delete"})}function m(){return itsmRequest({url:"/api/v1/ci/sync/Department",method:"get"})}n.r(t),n.d(t,"queryDepartment",function(){return a}),n.d(t,"getDepartment",function(){return r}),n.d(t,"addDepartment",function(){return o}),n.d(t,"updateDepartment",function(){return i}),n.d(t,"deleteDepartment",function(){return l}),n.d(t,"queryOrg",function(){return s}),n.d(t,"getOrg",function(){return u}),n.d(t,"addOrg",function(){return d}),n.d(t,"updateOrg",function(){return c}),n.d(t,"deleteOrg",function(){return p}),n.d(t,"syncOrg",function(){return m})}}]);