(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4df3","1x4Q","qW5P"],{"0gWk":function(e,t,a){"use strict";var l=a("IRQf");a.n(l).a},"1x4Q":function(e,t,a){"use strict";function l(e){e||(e={});var t={};return e.pageIndex?t.pageNum=e.pageIndex:t.pageNum=1,e.pageSize?t.pageSize=e.pageSize:t.pageSize=10,t.order||(t.order="updated desc"),t.where=e.where,passportRequest({url:"/api/v2/groups",method:"get",params:t})}function o(e){return passportRequest({url:"/api/v2/groups/"+e,method:"get"})}function i(e){return passportRequest({url:"/api/v2/groups",method:"post",data:e})}function r(e){return passportRequest({url:"/api/v2/groups/"+e.id,method:"put",data:e})}function s(e){return passportRequest({url:"/api/v2/groups/"+e,method:"delete"})}function n(e){return passportRequest({url:"/api/v2/groups/"+e+"/users",method:"get"})}function d(e,t){return passportRequest({url:"/api/v2/groups/"+e+"/users/"+t,method:"post"})}function c(e,t){return passportRequest({url:"/api/v2/groups/"+e+"/users/"+t,method:"delete"})}a.r(t),a.d(t,"queryGroup",function(){return l}),a.d(t,"getGroup",function(){return o}),a.d(t,"addGroup",function(){return i}),a.d(t,"updateGroup",function(){return r}),a.d(t,"deleteGroup",function(){return s}),a.d(t,"queryUserByGroup",function(){return n}),a.d(t,"addUserByGroup",function(){return d}),a.d(t,"deleteUserByGroup",function(){return c})},"6Xwx":function(e,t,a){},IRQf:function(e,t,a){},LZLU:function(e,t,a){"use strict";var l=a("woN4");a.n(l).a},TXdC:function(e,t,a){"use strict";a.r(t);var l=a("9kT/"),o=a("qW5P"),i=a("Z6R/"),r=a("Ff/F"),s=a("S+eF"),n=a("+n12"),d=a("lYFU"),c=(a("Nfcp"),a("Smy8"));function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p={components:{"role-Details":d.default},name:"account_Details",props:{headerBar:{type:Boolean,default:function(){return!1}},readonlyView:{type:Boolean,default:function(){return!1}}},data:function(){var e;return u(e={dynamicTags:["张三"],insideNew:!1,statusC:1,orgView:!1,roleView:!1,radioSex:1,url:"src/images/common/avatar_default.png",bingUserNew:!1,bingUserEdit:!1,bingUserInfo:!1,bingUser:!1,mobildBinding:!1,emailBinding:!1,dialogFormVisibl0:!1,smsCode:{show:!0,count:"",timer:null},mobileNumber:"",menuTree:[{label:"技术研发部",id:1,system:!0,children:[{label:"研发工程组",id:2,system:!1}]}],activeNames2:["1"],activeNames:["1","2","3"],show:!0,departmentLabel:"技术研发部 / 研发工程组",departConfig:{disabled:!0,placeholder:"请选择"},companyConfig:{disabled:!0,placeholder:"请选择"},fullnameOptions:[],nicknameOptions:[],value:[],loading:!1,avatar:{},user:{},sexOptions:[{label:"男",value:"M"},{label:"女",value:"F"}],birthdayConfig:{type:"date"},nameConfig:{placeholder:"请输入"},userForm:{name:"",shortname:"",type:"N",userEnabled:!0,expireDateRange:[],useState:"2",sex:"M",fullname:"",nickname:"",title:"",mobile:"",workPhone:"",identification:"",birthday:null,district:"",street:"",nativePlace:"",nativePlaceAddress:"",portrait:[],weixin:"",email:"",qq:"",im:"",company:{}},mobileForm:{number:"",six:""},useStateOptions:[],titleOptions:[]},"useStateOptions",[{label:"启用",value:!0},{label:"停用",value:!1}]),u(e,"expireDateRangeConfig",{type:"datetimerange"}),u(e,"expireOptions",[{label:"永久",value:0},{label:"自定义",value:1}]),u(e,"rolePageModel",{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"角色标识",width:"200"},{name:"label",label:"角色名称",width:"200",type:"link",router:{url:"#"}},{name:"description",label:"描述",minwidth:"350"},{name:"status",label:"标记",width:"100",type:"template"},{name:"updated",label:"更新时间",minwidth:"160",type:"date"}]},page:[]}),u(e,"roleEditPageModel",{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"角色标识",minwidth:"200"},{name:"label",label:"角色名称",minwidth:"200",type:"modal"},{name:"description",label:"描述",minwidth:"350"},{name:"status",label:"标记",minwidth:"100"},{name:"updated",label:"更新时间",minwidth:"160"}],actionWidth:"60",actions:[{name:"delete",label:"删除",icon:"el-icon-delete"}]},page:[{name:"user",label:"普通用户",status:"系统",updated:"2019-10-19 12:00:00"}]}),u(e,"queryList",{}),u(e,"resourceType",{}),u(e,"dynamicValidateForm",{}),u(e,"rules",{realName:[{required:!0,message:"请输入账户名称",trigger:"blur"}],shortname:[{required:!0,message:"请输入账户名称",trigger:"blur"},{pattern:/^[a-z0-9_]{3,20}$/,message:"支持小写字母、数字、下划线，须字母开头！",trigger:"blur"},{min:3,max:20,message:"长度3~20个字符",trigger:"blur"}],type:[{required:!0,message:"请选拔账户类型",trigger:"blur"}],fullname:[{max:50,message:"长度不超过50个字符",trigger:"blur"}],nickname:[{pattern:/^[a-zA-Z0-9_:\-\(\)\[\]\{\}\u4E00-\u9FA5（）【】]*$/,message:"支持字母、数字、汉字及‘-_[](){}’组合，长度不超过20！",trigger:"blur"}],workPhone:[{max:20,message:"长度不超过20个字符",trigger:"blur"}],identification:[{pattern:/^(([1-9]\d{14})|([1-9]\d{16}(\d|X|x)))$/,message:"请输入正确的身份证号码！",trigger:"blur"}],street:[{max:100,message:"长度不超过100个字符",trigger:"blur"}],nativePlaceAddress:[{max:100,message:"长度不超过100个字符",trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号码",trigger:"blur"},{pattern:/^1(3[0-9]|4[579]|5[0-35-9]|6[56]|7[0-8]|8[0-9]|9[189])\d{8}$/,message:"请输入正确的手机号码！",trigger:"blur"}],qq:[{pattern:/^(([1-9]\d{4,10})|([A-Za-z\d]+([\-_\.][A-Za-z\d]+)*@([A-Za-z\d]+[\-\.])+[A-Za-z\d]{2,5}))$/,message:"请输入正确的QQ号码！",trigger:"blur"}],im:[{max:50,message:"长度不超过50个字符",trigger:"blur"}],weixin:[{pattern:/^([1-9]\d{4,10})|([a-zA-Z][a-zA-Z\d_\-]{5,19})$/,message:"请输入正确的微信号码！",trigger:"blur"}],email:[{pattern:/^[A-Za-z\d]+([\-_\.][A-Za-z\d]+)*@([A-Za-z\d]+[\-\.])+[A-Za-z\d]{2,5}$/,message:"请输入正确的email！",trigger:"blur"}]}),u(e,"rolesDialogVisible",!1),u(e,"accountTypeOptions",[]),u(e,"counvertExpired",0),u(e,"roleSelected",[]),u(e,"roleEditSelected",[]),u(e,"roleDeleted",[]),u(e,"listRoleQuery",{}),u(e,"person",{}),u(e,"editable",!1),u(e,"addable",!1),u(e,"tenantName",""),u(e,"pageModel",{config:{selectionMode:"single",readonly:!1,columns:[{name:"realName",label:"姓名",type:"link",minwidth:"200",router:{url:"/setting/org/view/{id}",params:["id"]}},{name:"sex",label:"性别",minwidth:"100"},{name:"Tenant",label:"公司",minwidth:"250"},{name:"departmentLabel",label:"部门",minwidth:"350"},{name:"updateTime",label:"更新时间",minwidth:"160",type:"date"}],actionWidth:"60",actions:[{name:"edit",label:"编辑",icon:"el-icon-edit"}]},page:[{label:"大黑",departmentLabel:" 研发工程组 / 技术研发部",company:"研发工程组 / 技术研发部",Tenant:"依赐诺网络",realName:"王小宝",title:"程序员",mobile:"18823655632",account:"daqiang_li",updateTime:"2019-04-04 17:51:39",path:"依赐诺网络科技 / 研发工程组 / 技术研发部",sex:"男"},{label:"王多鱼2号",Tenant:"依赐诺网络",departmentLabel:"研发工程组 / 运维工程组",company:"国际软件公司 / 运维工程组",realName:"王多多",title:"架构师",mobile:"18823655632",account:"qiang_da",updateTime:"2019-04-04 17:51:39",path:"国际软件公司 / 运维工程组 ",sex:"男"},{label:"工程师-张师傅",Tenant:"国际软件公司",departmentLabel:"市场部门",company:"国际软件公司 / 市场部门",realName:"树先生",title:"程序员",mobile:"18823655632",path:"广州基楚科技 ",account:"--",updateTime:"2019-04-04 17:51:39",sex:"男"},{label:"电风扇",Tenant:"广州基楚科技",departmentLabel:"技术部门",company:"广州基楚科技 / 技术部门",realName:"谢逊",title:"程序员",mobile:"18823655632",path:"广州基楚科技 / 技术部门 ",account:"z111212",updateTime:"2019-04-04 17:51:39",sex:"男"},{label:"电风扇",Tenant:"个人",departmentLabel:"--",company:"广州基楚科技 / 技术部门",realName:"李三",title:"程序员",mobile:"13654854587",account:"--",updateTime:"2019-04-04 17:51:39",sex:"男"}]}),e},created:function(){var e=this;this.rolePageModel.page=c.role,/[^/]*\/edit\/[^/]*/.test(this.$route.path)&&(this.editable=!0),/[^/]*\/add/.test(this.$route.path)&&(this.addable=!0),/[^/]*\/add/.test(this.$route.path)&&(this.addable=!0),"accountView2"==this.$route.name&&(this.statusC=2);var t=this.$route.params.id;t&&Object(l.getUser)(t).then(function(t){e.userForm=t.data;var a=t.data.name.split(":"),o=a.length>1?a[1]:a[0];e.userForm.shortname=o,e.userForm.effectiveTime&&(e.userForm.expireDateRange=[e.userForm.effectiveTime,e.userForm.expirationTime]),e.userForm.userEnabled=!e.userForm.locked;var i={where:"status='0'"};Object(r.queryCompany)(i).then(function(t){t.body.length>0&&(e.userForm.company=t.body[0])}),Object(l.queryPerson)({where:"passportId='"+t.data.guserId+"'"}).then(function(t){e.person=t.body[0],e.person&&e.person2User(e.person)}),e.user=t.data});var a=this.$route.params.personId;a&&Object(l.getPerson)(a).then(function(t){e.person=t,e.person&&e.person2User(e.person)});var o=window.sessionStorage.getItem(window.location.hostname);o&&(this.tenantName=JSON.parse(o).name),this.loadRoleEditPage()},methods:{rowAction:function(e,t,a){"remove"===e?this.removeTool(a):"edit"===e?this.bingUserEdit=!0:"enable"===e?this.enableTool(a):"disable"===e?this.disableTool(a):"test"===e?this.testTool(a):"realName"===e&&(this.bingUserInfo=!0)},queryFullname:function(e,t){var a={};a.where=e?"realName like '%"+e+"%' escape '!'":"",Object(l.queryPerson)(a).then(function(e){for(var a=e.body,l=[],o=0;o<a.length;o++)l.push({value:a[o].realName,id:a[o].id});t(l)})},queryNickname:function(e,t){var a={};a.where=e?"label like '%"+e+"%' escape '!' and (authorizationState = 2 or authorizationState is null)":"authorizationState = 2 or authorizationState is null",Object(l.queryPerson)(a).then(function(e){for(var a=e.body,l=[],o=0;o<a.length;o++)l.push({value:a[o].label,id:a[o].id});t(l)})},loadPersonInfo:function(e){var t=this;if(e){var a=Number(e.id);isNaN(a)||Object(l.getPerson)(a).then(function(e){t.person2User(e)})}},queryDeptNameByCompany:function(e,t){var a=this;Object(i.queryDepartment)({}).then(function(e){for(var l=e.body,o=[],i=0;i<l.length;i++)o.push({value:l[i].label,id:l[i].id});o.length<1&&(a.userForm.department=null,a.userForm.departUnionId=null),t(o)})},loadDepartInfo:function(e){var t=this;if(e){var a=Number(e.id);isNaN(a)||Object(i.getDepartment)(a).then(function(e){t.userForm.department=e,t.userForm.departUnionId=e.unionId})}},submitForm:function(e){this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;alert("submit!")})},openRoleDialog:function(){var e=this;this.rolesDialogVisible=!0;var t="";if(this.roleEditPageModel.page&&this.roleEditPageModel.page.length>0){t="id not in (";for(var a=[],l=0;l<this.roleEditPageModel.page.length;l++)a.push(this.roleEditPageModel.page[l].id);t+=a.join(","),t+=")"}Object(o.queryRole)({pageIndex:this.listRoleQuery.pageIndex,pageSize:this.listRoleQuery.pageSize,where:t}).then(function(t){e.rolePageModel.page=c.role})},loadRolePage:function(e,t){var a=this,l="";if(this.roleEditPageModel.page&&this.roleEditPageModel.page.length>0){l="id not in (";for(var i=[],r=0;r<this.roleEditPageModel.page.length;r++)i.push(this.roleEditPageModel.page[r].id);l+=i.join(","),l+=")"}Object(o.queryRole)({pageIndex:e,pageSize:t,where:l}).then(function(l){a.rolePageModel.config.total=l.data.total,a.rolePageModel.config.pageSize=t,a.rolePageModel.page=l.data.rows,a.listRoleQuery.pageIndex=e,a.listRoleQuery.pageSize=t})},loadRoleEditPage:function(e,t){var a=this,o=this.$route.params.id;o&&Object(l.queryRoleByUser)(o).then(function(e){a.roleEditPageModel.config.total=e.data.length,a.roleEditPageModel.config.pageSize=100,a.roleEditPageModel.page=e.data})},roleRowAction:function(e,t,a){},roleEditRowAction:function(e,t,a){"delete"===e?(this.roleEditPageModel.page.splice(t,1),this.roleDeleted.push(a),this.roleDeleted=n.a.arrayDeduplication(this.roleDeleted,"id")):"label"===e&&(this.roleView=!0)},hasRoleSelected:function(e){this.roleSelected=n.a.arrayDeduplication(e,"id")},hasRoleEditSelected:function(e){this.roleEditSelected=n.a.arrayDeduplication(e,"id")},clearRole:function(){this.roleDeleted.push.apply(this.roleDeleted,this.roleEditPageModel.page),this.roleEditPageModel.page=[],this.roleEditPageModel.config.total=0,this.roleDeleted=n.a.arrayDeduplication(this.roleDeleted,"id")},deleteRole:function(){for(var e=[],t=0;t<this.roleEditSelected.length;t++)for(var a=0;a<this.roleEditPageModel.page.length;a++)this.roleEditSelected[t].id===this.roleEditPageModel.page[a].id&&(e.push(this.roleEditPageModel.page[a]),this.roleEditPageModel.page.splice(a,1));e.length>0&&(this.roleDeleted.push.apply(this.roleDeleted,e),this.roleEditPageModel.config.total=this.roleEditPageModel.page.length,this.roleDeleted=n.a.arrayDeduplication(this.roleDeleted,"id"))},addRole:function(){this.rolesDialogVisible=!1,this.roleEditPageModel.config.total=this.roleEditPageModel.config.total+this.roleSelected.length,this.roleEditPageModel.config.pageSize=100,this.roleEditPageModel.page=this.roleEditPageModel.page.concat(this.roleSelected),this.roleEditPageModel.page=n.a.arrayDeduplication(this.roleEditPageModel.page,"id")},onSubmit:function(){var e=this;this.$refs.userForm.validate(function(t){if(t)if(1===e.counvertExpired?(e.userForm.effectiveTime=e.userForm.expireDateRange[0],e.userForm.expirationTime=e.userForm.expireDateRange[1]):(e.userForm.effectiveTime=null,e.userForm.expirationTime=null),e.userForm.id){if(!e.roleEditPageModel.page||e.roleEditPageModel.page.length<1)return void e.$message.error("必须关联至少一个角色！");e.tenantName===e.userForm.shortname?e.userForm.name=e.tenantName:e.userForm.name=e.tenantName+":"+e.userForm.shortname,e.userForm.nickname||(e.userForm.nickname=e.userForm.shortname),Object(l.updateUser)(e.userForm).then(function(){return e.addOrDeleteRoleByUser()},function(t){return e.$message.error(t.message)}).then(function(){return e.userForm.nickname?e.saveOrUpdatePerson():s.Promise.resolve(!0)},function(t){return e.$message.error(t.message)}).then(function(){e.$message.success("更新账户成功")},function(t){return e.$message.error(t.message)})}else{if(!e.roleEditPageModel.page||e.roleEditPageModel.page.length<1)return void e.$message.error("必须关联至少一个角色！");e.tenantName===e.userForm.shortname?e.userForm.name=e.tenantName:e.userForm.name=e.tenantName+":"+e.userForm.shortname,e.userForm.nickname||(e.userForm.nickname=e.userForm.shortname),!1===e.userForm.userEnabled?e.userForm.locked=new Date:e.userForm.locked=null,Object(l.addUser)(e.userForm).then(function(t){return 400===t.status?s.Promise.reject(t):(e.userForm.id=t.data.id,e.userForm.guserId=t.data.guserId,e.addOrDeleteRoleByUser())}).then(function(){return e.userForm.nickname?e.saveOrUpdatePerson():s.Promise.resolve(!0)}).then(function(){e.$message.success("创建账户成功"),e.$router.push({name:"accountEdit",params:{id:e.userForm.id}})}).catch(function(t){e.$message.error(t.message)})}})},saveOrUpdatePerson:function(){var e=this;return new s.Promise(function(t,a){e.user2Person(),e.person.id?Object(l.updatePerson)(e.person).then(function(e){return t(e)},function(e){return a(e)}):Object(l.addPerson)(e.person).then(function(e){return t(e)},function(e){return a(e)})})},addOrDeleteRoleByUser:function(){var e=this,t=new s.Promise(function(t,a){if(e.roleSelected&&e.roleSelected.length>0){for(var o=[],i=0;i<e.roleSelected.length;i++)o.push(Object(l.addRoleByUser)(e.userForm.id,e.roleSelected[i].id));s.Promise.all(o).then(function(){return t(!0)})}else t(!0)}),a=new s.Promise(function(t,a){if(e.roleDeleted&&e.roleDeleted.length>0){for(var o=[],i=0;i<e.roleDeleted.length;i++)o.push(Object(l.deleteRoleByUser)(e.userForm.id,e.roleDeleted[i].id));s.Promise.all(o).then(function(){return t(!0)})}else t(!0)});return s.Promise.all([t,a])},user2Person:function(){this.person||(this.person={}),this.person.id||(this.person.id=this.userForm.personId),this.person.label=this.userForm.nickname,this.tenantName===this.userForm.shortname?this.person.account=this.tenantName:this.person.account=this.tenantName+":"+this.userForm.shortname,this.person.username=this.userForm.shortname,this.person.email=this.userForm.email,this.person.mobilePhoneNumber=this.userForm.mobile,!0===this.userForm.userEnabled?this.person.useState=1:this.person.useState=2,this.person.authorizationState=1,this.person.accountType=this.userForm.type,this.person.title=this.userForm.title,this.person.realName=this.userForm.fullname,this.person.identification=this.userForm.identification,this.person.sex=this.userForm.sex,this.person.birthday=this.userForm.birthday,this.person.workPhone=this.userForm.workPhone,this.person.nativePlace=this.userForm.nativePlace,this.person.nativePlaceAddress=this.userForm.nativePlaceAddress,this.person.region=this.userForm.district,this.person.address=this.userForm.street,this.person.qq=this.userForm.qq,this.person.weixin=this.userForm.weixin,this.person.im=this.userForm.im,this.person.portrait=this.userForm.portrait,this.person.department=this.userForm.department,this.person.passportId=this.userForm.guserId,this.person.nowId=this.userForm.guserId,this.$forceUpdate()},person2User:function(e){this.userForm.personId=e.id,this.userForm.fullname=e.realName,this.userForm.nickname=e.label,this.userForm.title=e.title,this.userForm.workPhone=e.workPhone,this.userForm.identification=e.identification,this.userForm.birthday=e.birthday,this.userForm.district=e.region,this.userForm.street=e.address,this.userForm.sex=e.sex,this.userForm.mobile=e.mobilePhoneNumber,this.userForm.weixin=e.weixin,this.userForm.email=e.email,this.userForm.qq=e.qq,this.userForm.im=e.im,this.userForm.nativePlace=e.nativePlace,this.userForm.nativePlaceAddress=e.nativePlaceAddress,this.userForm.department=e.department,this.userForm.department&&(this.departmentLabel=this.userForm.department.label),this.userForm.portrait=e.portrait,this.$forceUpdate()},smsCode1:function(){return this.smsCode=!1},handleClose:function(e){this.dynamicTags.splice(this.dynamicTags.indexOf(e),1)}},watch:{"userForm.effectiveTime":{handler:function(e,t){this.counvertExpired=e?1:0}},"userForm.department":{handler:function(e,t){e&&(this.departmentLabel=e.label)},deep:!0}}},m=(a("u1q/"),a("LZLU"),a("KHd+")),g=Object(m.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"app-container ilayout-container"},[a("el-container",{staticClass:"sub"},[e.headerBar?e._e():a("el-header",[a("el-row",[a("router-link",{attrs:{to:"/setting/account"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("返回")])],1),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("上一条")]),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("下一条")]),e._v(" "),e.editable||e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.editable=!0}}},[e._v("编辑")]),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("保存")]):e._e(),e._v(" "),e.addable?e._e():a("router-link",{attrs:{to:"/setting/account/add"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-main",[a("el-collapse",{staticClass:"its_collapse",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-form",{ref:"userForm",attrs:{"label-width":"80px",model:e.userForm,rules:e.rules}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{staticStyle:{"min-height":"30px"},attrs:{title:"基本信息",name:"1"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[1==e.statusC?a("el-form-item",{attrs:{label:"账户",prop:"shortname"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.shortname,callback:function(t){e.$set(e.userForm,"shortname",t)},expression:"userForm.shortname"}})],1):e._e(),e._v(" "),1!=e.statusC?a("el-form-item",{attrs:{label:"账户",prop:"shortname"}},[a("itsnow-text",{attrs:{readonly:""},model:{value:e.userForm.shortname,callback:function(t){e.$set(e.userForm,"shortname",t)},expression:"userForm.shortname"}})],1):e._e(),e._v(" "),1==e.statusC?a("el-form-item",{attrs:{label:"昵称"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.nickname,callback:function(t){e.$set(e.userForm,"nickname",t)},expression:"userForm.nickname"}})],1):e._e(),e._v(" "),1==e.statusC?a("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.mobileNumber,callback:function(t){e.mobileNumber=t},expression:"mobileNumber"}})],1):e._e()],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[1==e.statusC?a("el-form-item",{attrs:{label:"状态"}},[1==e.statusC?a("itsnow-text",{attrs:{value:"解锁",readonly:""}}):e._e()],1):e._e(),e._v(" "),e.headerBar||!e.editable&&!e.addable||1!=e.statusC?e._e():a("el-form-item",{attrs:{"label-width":"80px",label:"人员"}},[a("el-col",{staticStyle:{width:"calc(100% - 32px)"},attrs:{span:24}},[a("a",{staticStyle:{position:"absolute","z-index":"1","padding-left":"5px"},on:{click:function(t){e.bingUserInfo=!0}}},e._l(e.dynamicTags,function(t){return a("el-tag",{key:t,attrs:{size:"mini",closable:""},on:{close:function(a){return e.handleClose(t)}}},[e._v("\n                                                                "+e._s(t)+"\n                                                            ")])}),1),e._v(" "),a("el-input",{attrs:{readonly:""}})],1),e._v(" "),a("el-button",{staticClass:"inputBtn",attrs:{type:"primary",plain:"",size:"mini",icon:"iconfont icontable"},on:{click:function(t){e.bingUser=!0}}})],1),e._v(" "),e.headerBar||!e.editable&&!e.addable&&1==e.statusC?a("el-form-item",{attrs:{"label-width":"80px",label:"人员"}},[a("el-col",{attrs:{span:24}},[a("a",{staticStyle:{position:"absolute","z-index":"1","padding-left":"5px"},on:{click:function(t){e.bingUserInfo=!0}}},[a("el-tag",{attrs:{size:"mini"}},[e._v("\n                                                                张三\n                                                            ")])],1),e._v(" "),a("el-input",{attrs:{disabled:""}})],1)],1):e._e(),e._v(" "),1!=e.statusC?a("el-form-item",{attrs:{"label-width":"80px",label:"人员"}},[a("el-col",{attrs:{span:24}},[a("a",{staticStyle:{position:"absolute","z-index":"1","padding-left":"5px"},on:{click:function(t){e.bingUserInfo=!0}}},[a("el-tag",{attrs:{size:"mini",closable:""}},[e._v("\n                                                                张三\n                                                            ")])],1),e._v(" "),a("el-input",{attrs:{disabled:""}})],1)],1):e._e(),e._v(" "),1==e.statusC?a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView}})],1):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.mobildBinding,title:"绑定"},on:{"update:visible":function(t){e.mobildBinding=t}}},[a("el-form",{attrs:{rules:e.rules}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{"label-width":"80px",label:"手机",prop:"mobile"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.mobileNumber,callback:function(t){e.mobileNumber=t},expression:"mobileNumber"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{"label-width":"80px",label:"验证码",prop:"name"}},[a("el-input",{model:{value:e.mobileForm.six,callback:function(t){e.$set(e.mobileForm,"six",t)},expression:"mobileForm.six"}},[e.smsCode.show?a("el-button",{attrs:{slot:"append"},on:{click:function(t){e.smsCode.show=!e.smsCode.show}},slot:"append"},[e._v("发送验证码")]):e._e(),e._v(" "),e.smsCode.show?e._e():a("el-button",{attrs:{slot:"append",disabled:""},slot:"append"},[e._v("请等59待秒")])],1)],1)],1)],1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.mobildBinding=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.mobildBinding=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.bingUser,title:"人员",width:"900px"},on:{"update:visible":function(t){e.bingUser=t}}},[a("el-row",[a("el-header",{staticStyle:{margin:"0"}},[a("el-row",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.bingUserNew=!0}}},[e._v("新增")])],1)],1),e._v(" "),a("itsnow-filter-page-list",{on:{rowAction:e.rowAction,loadPage:e.loadPage,selected:e.hasSelected},model:{value:e.pageModel,callback:function(t){e.pageModel=t},expression:"pageModel"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUser=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUser=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.bingUserNew,title:"新增",width:"860px"},on:{"update:visible":function(t){e.bingUserNew=t}}},[a("div",{staticClass:"its_det",staticStyle:{padding:"2px"}},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"userForm",attrs:{"label-width":"80px",model:e.userForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"人员信息",name:"2"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"姓",prop:"realName"}},[a("itsnow-text",{staticStyle:{"padding-right":"0"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"名","label-width":"40px",prop:"fullname"}},[a("itsnow-text")],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"公司",prop:"company"}},[a("el-select",{attrs:{value:"依赐诺网络科技",placeholder:"请选择"}},[a("el-option",{attrs:{label:"依赐诺网络科技",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"国际软件公司",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"广州基楚科技",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"个人",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"org"}},[a("el-col",{staticStyle:{width:"calc(100% - 32px)"},attrs:{span:24}},[a("a",{staticStyle:{position:"absolute","z-index":"1","padding-left":"5px"},on:{click:function(t){e.bingUserInfo=!0}}},[a("el-tag",{attrs:{size:"mini",closable:""}},[e._v("\n                                                                                                技术研发部 / 研发工程组\n                                                                                            ")])],1),e._v(" "),a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择",disabled:!e.editable&&!e.addable}})],1),e._v(" "),a("el-button",{staticClass:"inputBtn",attrs:{type:"primary",plain:"",size:"mini",icon:"iconfont icontable"},on:{click:function(t){e.insideNew=!0}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"座机"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"区号"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"电话"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("*")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"分机"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"居住地"}},[a("i-district",{attrs:{disabled:!e.editable&&!e.addable},model:{value:e.userForm.region,callback:function(t){e.$set(e.userForm,"region",t)},expression:"userForm.region"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"address","label-width":"0"}},[a("el-autocomplete",{attrs:{placeholder:"请选择",readonly:!e.editable&&!e.addable||e.readonlyView}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证",prop:"identification"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.identification,callback:function(t){e.$set(e.userForm,"identification",t)},expression:"userForm.identification"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期"}},[a("i-date-time-picker",{attrs:{config:e.birthdayConfig,readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.birthday,callback:function(t){e.$set(e.userForm,"birthday",t)},expression:"userForm.birthday"}})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"籍贯"}},[a("i-district",{attrs:{disabled:!e.editable&&!e.addable},model:{value:e.userForm.nativePlace,callback:function(t){e.$set(e.userForm,"nativePlace",t)},expression:"userForm.nativePlace"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"nativePlaceAddress","label-width":"0"}},[a("el-autocomplete",{attrs:{placeholder:"请选择",readonly:!e.editable&&!e.addable||e.readonlyView}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{staticClass:"avatar_user",attrs:{label:"头像",prop:"avatar"}},[a("el-avatar",{attrs:{shape:"square",size:116,fit:e.cover,src:e.url}}),e._v(" "),a("el-radio-group",{staticClass:"its_radioSex",attrs:{size:"mini"},model:{value:e.radioSex,callback:function(t){e.radioSex=t},expression:"radioSex"}},[a("el-radio-button",{attrs:{label:1}},[a("i",{staticClass:"el-icon-male"})]),e._v(" "),a("el-radio-button",{staticClass:"female",attrs:{label:2}},[a("i",{staticClass:"el-icon-female"})])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.mobilePhoneNumber,callback:function(t){e.$set(e.userForm,"mobilePhoneNumber",t)},expression:"userForm.mobilePhoneNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信",prop:"weixin"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.weixin,callback:function(t){e.$set(e.userForm,"weixin",t)},expression:"userForm.weixin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.qq,callback:function(t){e.$set(e.userForm,"qq",t)},expression:"userForm.qq"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUserNew=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUserNew=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.insideNew,title:"组织",width:"280px",top:"8vh"},on:{"update:visible":function(t){e.insideNew=t}}},[a("el-row",{staticClass:"its_dialogBody"},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{attrs:{"label-width":"100px",rules:e.rules}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-row",{staticClass:"its_card_body"},[a("el-header",{staticStyle:{margin:"0"}},[a("el-row",[a("itsnow-text",{staticStyle:{width:"100px"}}),e._v(" "),a("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"}}),e._v(" "),e.openFold?a("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder-opened"},on:{click:function(t){e.openFold=!1}}}):e._e(),e._v(" "),e.openFold?e._e():a("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder"},on:{click:function(t){e.openFold=!0}}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[a("el-aside",{staticClass:"its_tree",staticStyle:{"min-width":"auto"}},[a("el-tree",{attrs:{"highlight-current":"","node-key":"id","default-expanded-keys":[1],data:e.menuTree}})],1)],1)],1)],1)],1)],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.insideNew=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.insideNew=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.bingUserEdit,title:"编辑",width:"860px"},on:{"update:visible":function(t){e.bingUserEdit=t}}},[a("div",{staticClass:"its_det",staticStyle:{padding:"2px"}},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"userForm",attrs:{"label-width":"80px",model:e.userForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"人员信息",name:"2"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"姓",prop:"realName"}},[a("itsnow-text",{staticStyle:{"padding-right":"0"},attrs:{value:"张"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"名","label-width":"40px",prop:"fullname"}},[a("itsnow-text",{attrs:{value:"三叁"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"公司",prop:"company"}},[a("el-select",{attrs:{value:"依赐诺网络科技",placeholder:"请选择"}},[a("el-option",{attrs:{label:"依赐诺网络科技",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"国际软件公司",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"广州基楚科技",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"个人",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"org"}},[a("el-col",{staticStyle:{width:"calc(100% - 32px)"},attrs:{span:24}},[a("a",{staticStyle:{position:"absolute","z-index":"1","padding-left":"5px"},on:{click:function(t){e.bingUserInfo=!0}}},[a("el-tag",{attrs:{size:"mini",closable:""}},[e._v("\n                                                                                                技术研发部 / 研发工程组\n                                                                                            ")])],1),e._v(" "),a("el-input",{staticStyle:{width:"100%"},attrs:{disabled:"",placeholder:"请选择",disabled:!e.editable&&!e.addable}})],1),e._v(" "),a("el-button",{staticClass:"inputBtn",attrs:{type:"primary",plain:"",size:"mini",icon:"iconfont icontable"},on:{click:function(t){e.insideNew=!0}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"座机"}},[a("el-col",{attrs:{span:6}},[a("el-input",{attrs:{placeholder:"区号"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"电话"}})],1),e._v(" "),a("el-col",{staticStyle:{"text-align":"center"},attrs:{span:1}},[e._v("*")]),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-input",{attrs:{placeholder:"分机"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"居住地"}},[a("i-district",{attrs:{placeholder:"请选择",disabled:!e.editable&&!e.addable},model:{value:e.userForm.region,callback:function(t){e.$set(e.userForm,"region",t)},expression:"userForm.region"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"address","label-width":"0"}},[a("el-autocomplete",{attrs:{placeholder:"请选择",readonly:!e.editable&&!e.addable||e.readonlyView}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证",prop:"identification"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.identification,callback:function(t){e.$set(e.userForm,"identification",t)},expression:"userForm.identification"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期"}},[a("i-date-time-picker",{attrs:{config:e.birthdayConfig,readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.birthday,callback:function(t){e.$set(e.userForm,"birthday",t)},expression:"userForm.birthday"}})],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"籍贯"}},[a("i-district",{attrs:{placeholder:"请选择",disabled:!e.editable&&!e.addable},model:{value:e.userForm.nativePlace,callback:function(t){e.$set(e.userForm,"nativePlace",t)},expression:"userForm.nativePlace"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"nativePlaceAddress","label-width":"0"}},[a("el-autocomplete",{attrs:{placeholder:"请选择",readonly:!e.editable&&!e.addable||e.readonlyView}})],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{staticClass:"avatar_user",attrs:{label:"头像",prop:"avatar"}},[a("el-avatar",{attrs:{shape:"square",size:116,fit:e.cover,src:e.url}}),e._v(" "),a("el-radio-group",{staticClass:"its_radioSex",attrs:{size:"mini"},model:{value:e.radioSex,callback:function(t){e.radioSex=t},expression:"radioSex"}},[a("el-radio-button",{attrs:{label:1}},[a("i",{staticClass:"el-icon-male"})]),e._v(" "),a("el-radio-button",{staticClass:"female",attrs:{label:2}},[a("i",{staticClass:"el-icon-female"})])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机"}},[a("itsnow-text",{attrs:{value:"13254541254",readonly:!e.editable&&!e.addable||e.readonlyView}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信",prop:"weixin"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.weixin,callback:function(t){e.$set(e.userForm,"weixin",t)},expression:"userForm.weixin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.userForm.qq,callback:function(t){e.$set(e.userForm,"qq",t)},expression:"userForm.qq"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUserEdit=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUserEdit=!1}}},[e._v("取 消")])],1)]),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.bingUserInfo,title:"查看",width:"860px"},on:{"update:visible":function(t){e.bingUserInfo=t}}},[a("div",{staticClass:"its_det",staticStyle:{padding:"2px"}},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"userForm",attrs:{"label-width":"80px",model:e.userForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"人员信息",name:"2"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:11}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"姓",prop:"realName"}},[a("itsnow-text",{staticStyle:{"padding-right":"0"},attrs:{value:"张",readonly:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"名","label-width":"40px",prop:"fullname"}},[a("itsnow-text",{attrs:{value:"三叁",readonly:""}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"公司",prop:"company"}},[a("el-select",{attrs:{disabled:"",value:"依赐诺网络科技",placeholder:"请选择"}},[a("el-option",{attrs:{label:"依赐诺网络科技",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"国际软件公司",value:"2"}}),e._v(" "),a("el-option",{attrs:{label:"广州基楚科技",value:"3"}}),e._v(" "),a("el-option",{attrs:{label:"个人",value:"4"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"org"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.departmentLabel,callback:function(t){e.departmentLabel=t},expression:"departmentLabel"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"座机",prop:"workPhone"}},[a("itsnow-text",{attrs:{value:"02188965215",readonly:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"居住地"}},[a("itsnow-text",{attrs:{value:"上海市松江区宋经街道成环路203号",readonly:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证",prop:"identification"}},[a("itsnow-text",{attrs:{value:"330254199304012789",readonly:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期",prop:"identification"}},[a("itsnow-text",{attrs:{value:"1993年4月1日",readonly:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"籍贯"}},[a("itsnow-text",{attrs:{value:"上海市宝山区沪杭村",readonly:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11,offset:1}},[a("el-form-item",{staticClass:"avatar_user",attrs:{label:"头像",prop:"avatar"}},[a("el-avatar",{attrs:{shape:"square",size:116,fit:e.cover,src:e.url}}),e._v(" "),a("el-radio-group",{staticClass:"its_radioSex",attrs:{size:"mini"},model:{value:e.radioSex,callback:function(t){e.radioSex=t},expression:"radioSex"}},[a("el-radio-button",{attrs:{label:1}},[a("i",{staticClass:"el-icon-male"})])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"手机"}},[a("itsnow-text",{attrs:{value:"13254541254",readonly:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("itsnow-text",{attrs:{readonly:""},model:{value:e.userForm.email,callback:function(t){e.$set(e.userForm,"email",t)},expression:"userForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"微信",prop:"weixin"}},[a("itsnow-text",{attrs:{readonly:""},model:{value:e.userForm.weixin,callback:function(t){e.$set(e.userForm,"weixin",t)},expression:"userForm.weixin"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"QQ",prop:"qq"}},[a("itsnow-text",{attrs:{readonly:""},model:{value:e.userForm.qq,callback:function(t){e.$set(e.userForm,"qq",t)},expression:"userForm.qq"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUserInfo=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.bingUserInfo=!1}}},[e._v("取 消")])],1)])],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"关联角色",name:"3"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"角色"}},[a("el-col",{staticClass:"form_tool"},[e.headerBar||!e.editable&&!e.addable?e._e():a("el-col",{staticClass:"form_tool_bar"},[e.editable||e.addable?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.openRoleDialog}},[e._v("新增")]):e._e(),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.deleteGroup}},[e._v("删除")]):e._e()],1),e._v(" "),a("itsnow-list",{attrs:{config:e.roleEditPageModel.config,readonly:!e.editable&&!e.addable||e.readonlyView},on:{rowAction:e.roleEditRowAction,selected:e.hasRoleEditSelected},scopedSlots:e._u([{key:"row",fn:function(t){var l=t.row;return["status"==t.column.name?a("div",["system"==l.status?a("span",[e._v("系统")]):a("span",[e._v("自定义")])]):e._e()]}}]),model:{value:e.roleEditPageModel.page,callback:function(t){e.$set(e.roleEditPageModel,"page",t)},expression:"roleEditPageModel.page"}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.rolesDialogVisible,title:"角色",width:"900px"},on:{"update:visible":function(t){e.rolesDialogVisible=t}}},[a("el-form",[a("el-row",[a("el-col",{attrs:{span:24}},[a("itsnow-filter-page-list",{on:{rowAction:e.roleRowAction,loadPage:e.loadRolePage,selected:e.hasRoleSelected},scopedSlots:e._u([{key:"row",fn:function(t){var l=t.row;return["status"==t.column.name?a("div",["system"==l.status?a("span",[e._v("系统")]):a("span",[e._v("自定义")])]):e._e()]}}]),model:{value:e.rolePageModel,callback:function(t){e.rolePageModel=t},expression:"rolePageModel"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.rolesDialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.roleView,title:"查看",width:"860px"},on:{"update:visible":function(t){e.roleView=t}}},[a("el-row",{staticClass:"its_dialogBody"},[a("role-Details",{attrs:{headerBar:"true",readonlyView:"true"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.roleView=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.roleView=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=g.exports},YsWD:function(e){e.exports={widget:[{date:"2019-02-15 15:56:10",label:"CMDBcolume1",name:"按类型分类的配置项实例统计",modules:"配置中心",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"CMDBcolume2",name:"某些配置类型在某时段新增配置项实例的统计",modules:"配置中心",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"CMDBPie1",name:"按类型分类的配置项实例统计百分比",modules:"配置中心",panelType:"饼图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"CMDBPie2",name:"某些配置类型在某时段新增配置项实例的统计百分比",modules:"配置中心",panelType:"饼图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"CMDBLine1",name:"按类型分类的配置项实例统计",modules:"配置中心",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"CMDBLine2",name:"某些配置类型在某时段新增配置项实例的统计",modules:"配置中心",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"CMDBTable1",name:"按类型分类的配置项实例统计表格",modules:"配置中心",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"CMDBTable2",name:"某些配置类型在某时段新增配置项实例的统计表格",modules:"配置中心",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"topo_info",name:"网络拓扑图",plug:"--",modules:"监控中心",panelType:"拓扑图",describe:"这里是一段关于这个面板的描述",dataSource:"topo",tab:"系统"},{date:"2019-02-15 15:56:10",label:"alarmEvent_info",plug:"--",name:"某些资源当前告警信息",modules:"监控中心",panelType:"当前告警",describe:"这里是一段关于这个面板的描述",dataSource:"alarm",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"alarmEvent2_info",plug:"--",name:"变量当前告警信息",modules:"监控中心",panelType:"当前告警",describe:"这里是一段关于这个面板的描述",dataSource:"alarm",tab:"系统"},{date:"2019-02-15 15:56:10",label:"linux_info",name:"Linux资源信息",modules:"监控中心",panelType:"时序图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"Linux",tab:"自定义"},{date:"2016-05-03 10:12:36",label:"monitorTable_info",name:"某些资源监控表格信息",modules:"监控中心",panelType:"组件",describe:"这里是一段关于这个面板的描述",plug:"--",dataSource:"monitor",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"lastData_info",plug:"--",name:"某资源的最新数据",modules:"监控中心",panelType:"最新数据",describe:"这里是一段关于这个面板的描述",dataSource:"monitor",tab:"系统"},{date:"2019-02-15 15:56:10",label:"serviceTool_info",plug:"--",name:"某资源的服务工具",modules:"监控中心",panelType:"工具",describe:"这里是一段关于这个面板的描述",dataSource:"operation",tab:"系统"},{date:"2019-02-15 15:56:10",label:"monitorColume",name:"某些类型在某时段新增资源实例的统计",modules:"监控中心",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"Linux",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"monitorLine",name:"某些类型在某时段新增资源实例的统计",modules:"监控中心",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"Linux",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"Availability_info",plug:"--",name:"某资源的可用率",modules:"监控中心",panelType:"饼图",describe:"这里是一段关于这个面板的描述",dataSource:"monitor",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"monitorPie",plug:"--",name:"某些类型在某时段新增资源实例的统计百分比",modules:"监控中心",panelType:"饼图",describe:"这里是一段关于这个面板的描述",dataSource:"monitor",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"monitorTable",plug:"--",name:"某些类型在某时段新增资源实例的统计",modules:"监控中心",panelType:"表格",describe:"这里是一段关于这个面板的描述",dataSource:"monitor",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"monitorHealthy",plug:"--",name:"健康状态表",modules:"监控中心",panelType:"状态表",describe:"这里是一段关于这个面板的描述",dataSource:"monitor",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"monitorPerformance",plug:"--",name:"性能指标项值的显示",modules:"监控中心",panelType:"性能指标",describe:"这里是一段关于这个面板的描述",dataSource:"monitor",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowStatus",modules:"运维中心",name:"某工单按流程状态工单数统计",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowMonth",modules:"运维中心",name:"某工单在最近一年的每月中各状态处理统计",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowType",modules:"运维中心",name:"各工单类型的工单数统计",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowTypeChoiceColume",modules:"运维中心",name:"状态分类下的工单数统计",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowStatusPie",modules:"运维中心",name:"某工单按流程状态工单数统计百分比",panelType:"饼图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowStatusLine",modules:"运维中心",name:"某工单按流程状态工单数统计",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowMonthLine",modules:"运维中心",name:"某工单在最近一年的每月中各状态处理统计",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowTypeLine",modules:"运维中心",name:"各工单类型的工单数统计",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowTypeChoiceLine",modules:"运维中心",name:"状态分类下的工单数统计",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowStatusTable",modules:"运维中心",name:"某工单按流程状态工单数统计",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowMonthTable",modules:"运维中心",name:"某工单在最近一年的每月中各状态处理统计",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowTypeTable",modules:"运维中心",name:"各工单类型的工单数统计",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowTypeTable",modules:"运维中心",name:"各工单类型的工单数统计",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"WorkflowMonthAll",modules:"运维中心",name:"各工单类型在最近一年的每月新发起的数量统计",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"workflow",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"operationTool_info",modules:"操作中心",name:"某些配置类型可执行的工具数量统计",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"operation",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"operationToolColume",modules:"操作中心",name:"某些配置类型可执行的工具数量统计",panelType:"柱状图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"operation",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"operationToolLine",modules:"操作中心",name:"某些配置类型可执行的工具数量统计",panelType:"折线图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"operation",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"operationToolPie",modules:"操作中心",name:"某些配置类型可执行的工具数量统计百分比",panelType:"饼图",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"operation",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"operationToolTable",modules:"操作中心",name:"最近一天即将执行的作业列表",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"operation",tab:"自定义"},{date:"2019-02-15 15:56:10",label:"operationToolTableJob",modules:"操作中心",name:"执行中的作业列表",panelType:"表格",plug:"--",describe:"这里是一段关于这个面板的描述",dataSource:"operation",tab:"自定义"}],homepage:[{date:"2016-05-03 10:12:36",label:"its_dashboard",name:"首页",plug:"服务器插件包",agreement:"综合",describe:"这里是关于这块视图的描述",tab:"系统"},{date:"2019-02-15 15:56:10",label:"itsm_center",name:"运维统计",agreement:"运维中心",plug:"--",describe:"这里是关于这块视图的描述",tab:"系统"},{date:"2019-02-15 15:56:10",label:"monitor_center",name:"监控总览",plug:"--",agreement:"监控中心",describe:"这里是关于这块视图的描述",tab:"自定义"}],homeLayout:[{x:0,y:0,w:8,h:13,i:"当前实时告警",id:1},{x:8,y:0,w:4,h:7,i:"一分钟系统负载",id:2},{x:8,y:7,w:4,h:6,i:"工单状态统计图",id:3},{x:0,y:13,w:4,h:6,i:"网络拓扑图",id:4},{x:4,y:13,w:4,h:6,i:"账户列表信息",id:5},{x:8,y:13,w:4,h:6,i:"2019年月工单数量统计图",id:6}],platform:[{id:1,title:"workflow流程有问题",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"运维中心"},{id:2,title:"拓扑图显示无法自动排列",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"监控中心"},{id:3,title:"Host下的工具统计无法显示",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"操作中心"},{id:4,title:"Linux配置问题",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"配置中心"}],sendOut:[{id:1,title:"workflow流程有问题",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"运维中心",person:"张三",chanle:"短信",status:"完成"},{id:2,title:"拓扑图显示无法自动排列",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"监控中心",person:"李四",chanle:"邮件",status:"异常"},{id:3,title:"Host下的工具统计无法显示",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"操作中心",person:"王五",chanle:"IM",status:"完成"},{id:4,title:"Linux配置问题",content:"这里是通知的相关内容",sendTime:"2019-02-15 15:56:10",modules:"配置中心",person:"张三",chanle:"短信",status:"完成"}]}},lYFU:function(e,t,a){"use strict";a.r(t);var l=a("Smy8"),o=a("+n12"),i=a("9kT/"),r=a("Z6R/"),s=a("1x4Q"),n=a("qW5P"),d=a("TXdC"),c=a("nKPK"),u=a("dzmM"),p=a("YsWD");function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var g={components:{"account-Details":d.default,"accountGroup-Details":c.default},name:"role_Details",props:{headerBar:{type:Boolean,default:function(){return!1}},readonlyView:{type:Boolean,default:function(){return!1}}},data:function(){var e,t=this;return m(e={radio333:1,chakan:!0,chakan2:!1,sigle:"",resourceTypeDialogVisible:!1,checkListOperation:[],tabPosition2:"top",tabPosition:"left",dialogChoiceModule:!1,choiceModule:["配置中心","监控中心"],choiceModule1:["客服中心","运维中心","配置中心","监控中心","操作中心","开发中心","资源中心","知识库","运营中心"],choiceModule2:["配置中心"],choiceModule3:["运维中心"],radioG:3,roleForm:{name:"",label:"",status:"custom",description:""},dialogForm:!1,homepage:[],dialogDashboard:!1,treeLinux:[],menuTree:[{label:"首页",system:!0,id:1,children:[{label:"总览",system:!0,id:2},{id:3,label:"设置",children:[{label:"面板库",id:4},{id:5,label:"视图"}]}]},{label:"客服中心",system:!0,id:7,children:[{label:"总览",system:!0,id:8},{id:9,label:"客服坐席"},{id:10,label:"服务工单"},{id:11,label:"信息发布"},{id:111,label:"客服协同"}]},{id:12,label:"运维中心",system:!0,children:[{label:"总览",system:!0,id:13},{id:14,label:"请求"},{id:15,label:"故障"}]},{id:16,label:"监控中心",children:[{id:17,label:"总览"},{id:18,label:"拓扑图"}]},{id:19,label:"操作中心",children:[{id:20,label:"总览"}]},{id:21,label:"开发设置",children:[{id:22,label:"总览"}]},{id:23,label:"知识库",children:[{id:24,label:"总览"}]},{id:26,label:"设置",children:[{id:27,label:"初始化"}]},{id:28,label:"运营分析",children:[]},{id:29,label:"资源中心",children:[]},{id:30,label:"配置中心",children:[]},{id:31,label:"系统设置",children:[]}],stateOptions:[{label:"系统",value:"system"},{label:"自定义",value:"custom"}],stateConfig:{disabled:!0},originGroup:!1,userGroup:!1,editable:!1,addable:!1,listUserQuery:{},listOrgQuery:{},listGroupQuery:{},accountInfo:!1,usersDialogVisible:!1,orgsDialogVisible:!1,groupsDialogVisible:!1,activeNames:["1","2","3","4"],formModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"id",label:"表单标识",minwidth:"200"},{name:"name",label:"表单名称",minwidth:"200",type:"link",router:{url:"#"}},{name:"father",label:"分类",width:"80"},{name:"desc",label:"描述",minwidth:"250"},{name:"flag",label:"标记",width:"80"},{name:"date",label:"更新时间",width:"160",type:"date"}],pageSize:10,total:0},page:[{id:"PhysicalHostForm",date:"2016-05-03 10:12:36",name:"服务器运维表单",father:"服务器",desc:"这里是一段对选择的描述",flag:"系统",type:"host"},{id:"ApplicationInfoForm",date:"2016-05-03 10:12:36",name:"Linux配置表单",father:"linux",desc:"这里是一段对选择的描述",flag:"自定义",type:"Linux"},{id:"WindowsBaseForm",date:"2016-05-03 10:12:36",name:"windows配置表单",father:"windows",desc:"这里是一段对选择的描述",flag:"自定义",type:"windows"}]},moduleTable:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"名称",minwidth:"150"},{name:"label",label:"显示名",minwidth:"150"},{name:"desc",label:"描述",minwidth:"200"}]},page:[]},rules:{label:[{required:!0,message:"请输入角色名称",trigger:"blur"},{pattern:/^[a-zA-Z0-9_\-\(\)\[\]\{\}\u4E00-\u9FA5（）【】]{2,50}$/,message:"只能输入汉字、字母、数字和-_()[]{}，长度2~50",trigger:"blur"},{validator:function(e,a,l){var o=t,i={};i=t.roleForm.id?{where:"label='"+a+"' and id!="+t.roleForm.id}:{where:"label='"+a+"'"},Object(n.queryRole)(i).then(function(e){200===e.status&&e.data.rows.length>0?l(new Error("角色名称已存在")):l()}).catch(function(e){o.$message.error(e)})},trigger:"blur"}],description:[{max:255,message:"长度不超过255个字符",trigger:"blur"}],name:[{required:!0,trigger:"blur"}]},treeConfig:{showCheckbox:!0,checkStrictly:!1,expandedKeys:[1]},userPageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"账户",type:"link",router:{url:"/setting/account/view/{guserId}",params:["guserId"]},minwidth:"150"},{name:"fullname",label:"昵称",minwidth:"150"},{name:"locked",label:"状态",width:"100",type:"template"},{name:"mobile",label:"手机",minwidth:"120"},{name:"user",label:"人员",minwidth:"150"},{name:"updated",label:"更新时间",minwidth:"160"}]},page:[]},userSelected:[],userEditSelected:[],userDeleted:[],orgSelected:[],roleID:"4",orgEditSelected:[],orgDeleted:[],groupSelected:[],groupEditSelected:[],groupDeleted:[],userEditPageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"账户",minwidth:"150",type:"modal"},{name:"fullname",label:"昵称",minwidth:"150"},{name:"locked",label:"状态",width:"100",type:"template"},{name:"mobile",label:"手机",minwidth:"120"},{name:"user",label:"人员",minwidth:"150"},{name:"updated",label:"更新时间",minwidth:"160"}],actionWidth:"60",actions:[{name:"delete",label:"删除",icon:"el-icon-delete",type:"text"}]},page:[]},orgPageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"departmentLabel",label:"部门",minwidth:"350"},{name:"Tenant",label:"公司",minwidth:"200"},{name:"updateTime",label:"更新时间",minwidth:"160",type:"date"}]},page:[]}},"orgSelected",[]),m(e,"orgEditPageModel",{config:{selectionMode:"selection",readonly:!1,columns:[{name:"departmentLabel",label:"部门",minwidth:"350"},{name:"Tenant",label:"公司",minwidth:"200"},{name:"updateTime",label:"更新时间",minwidth:"160",type:"date"}],actionWidth:"60",actions:[{name:"delete",label:"删除",icon:"el-icon-delete",type:"text"}]},page:[]}),m(e,"groupPageModel",{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"账户组标识",minwidth:"200"},{name:"label",label:"账户组名称",minwidth:"200",type:"modal"},{name:"description",label:"描述",minwidth:"250"},{name:"status",label:"标记",width:"100"},{name:"updated",label:"更新时间",width:"160",type:"date"}]},page:[]}),m(e,"groupSelected",[]),m(e,"groupEditPageModel",{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"账户组标识",minwidth:"200"},{name:"label",label:"账户组名称",minwidth:"200",type:"modal"},{name:"description",label:"描述",minwidth:"250"},{name:"status",label:"标记",width:"100"},{name:"updated",label:"更新时间",width:"160",type:"date"}],actionWidth:"60",actions:[{name:"delete",label:"删除",icon:"el-icon-delete",type:"text"}]},page:[]}),e},created:function(){var e=this;/[^/]*\/edit\/[^/]*/.test(this.$route.path)&&(this.editable=!0,this.roleID=this.$route.params.id,this.roleForm=this.$route.params.data),/[^/]*\/add/.test(this.$route.path)&&(this.addable=!0);var t=this.$route.params.id;t&&Object(n.getRole)(t).then(function(t){e.roleForm=t.data}),this.loadUserEditPage(),this.loadOrgEditPage(),this.loadGroupEditPage()},mounted:function(){this.homepage=p.homepage,this.userPageModel.page=l.account,this.userEditPageModel.page=[l.account[0]],this.groupPageModel.page=l.userGroup,this.groupEditPageModel.page=[l.userGroup[0]],this.orgPageModel.page=l.origin,this.orgEditPageModel.page=[l.origin[0]],this.moduleTable.page=l.moduleTable,this.treeLinux=u.dataResource},methods:{loadUserPage:function(e,t){var a=this,l="";if(this.userEditPageModel.page&&this.userEditPageModel.page.length>0){l="id not in (";for(var o=[],r=0;r<this.userEditPageModel.page.length;r++)o.push(this.userEditPageModel.page[r].id);l+=o.join(","),l+=")"}Object(i.queryUser)({pageIndex:e,pageSize:t,where:l}).then(function(l){a.userPageModel.config.total=l.data.total,a.userPageModel.config.pageSize=t,a.userPageModel.page=l.data.rows,a.listUserQuery.pageIndex=e,a.listUserQuery.pageSize=t})},loadUserEditPage:function(e,t){var a=this,l=this.$route.params.id;l&&Object(n.queryUserByRole)(l).then(function(e){a.userEditPageModel.config.total=e.data.length,a.userEditPageModel.config.pageSize=100,a.userEditPageModel.page=e.data})},userRowAction:function(e,t,a){"name"===e&&(this.accountInfo=!0)},userEditRowAction:function(e,t,a){"delete"===e?(this.userEditPageModel.page.splice(t,1),this.userDeleted.push(a),this.userDeleted=o.a.arrayDeduplication(this.userDeleted,"id")):"name"===e&&(this.accountInfo=!0)},loadOrgPage:function(e,t){var a=this,l="";if(this.orgEditPageModel.page&&this.orgEditPageModel.page.length>0){l="id not in (";for(var o=[],i=0;i<this.orgEditPageModel.page.length;i++)o.push(this.orgEditPageModel.page[i].id);l+=o.join(","),l+=")"}Object(r.queryOrg)({pageIndex:e,pageSize:t,where:l}).then(function(l){a.orgPageModel.config.total=l.data.total,a.orgPageModel.config.pageSize=t,a.orgPageModel.page=l.data.rows,a.listOrgQuery.pageIndex=e,a.listOrgQuery.pageSize=t})},loadOrgEditPage:function(e,t){var a=this,l=this.$route.params.id;l&&Object(n.queryOrgByRole)(l).then(function(e){a.orgEditPageModel.config.total=e.data.length,a.orgEditPageModel.config.pageSize=100,a.orgEditPageModel.page=e.data})},orgRowAction:function(e,t,a){"departmentLabel"===e&&(this.originGroup=!0)},orgEditRowAction:function(e,t,a){"delete"===e&&(this.orgEditPageModel.page.splice(t,1),this.orgDeleted.push(a),this.orgDeleted=o.a.arrayDeduplication(this.orgDeleted,"id")),"departmentLabel"===e&&(this.originGroup=!0)},loadGroupPage:function(e,t){var a=this;if(this.groupEditPageModel.page&&this.groupEditPageModel.page.length>0){"id not in (";for(var l=[],o=0;o<this.groupEditPageModel.page.length;o++)l.push(this.groupEditPageModel.page[o].id);l.join(","),")"}Object(s.queryGroup)({pageIndex:e,pageSize:t}).then(function(l){a.groupPageModel.config.total=l.data.total,a.groupPageModel.config.pageSize=t,a.groupPageModel.page=l.data.rows,a.listGroupQuery.pageIndex=e,a.listGroupQuery.pageSize=t})},loadGroupEditPage:function(e,t){var a=this,l=this.$route.params.id;l&&Object(n.queryGroupByRole)(l).then(function(e){a.groupEditPageModel.config.total=e.data.length,a.groupEditPageModel.config.pageSize=100,a.groupEditPageModel.page=e.data})},groupRowAction:function(e,t,a){"label"===e&&(this.userGroup=!0)},groupEditRowAction:function(e,t,a){"delete"===e?(this.groupEditPageModel.page.splice(t,1),this.groupDeleted.push(a),this.groupDeleted=o.a.arrayDeduplication(this.groupDeleted,"id")):"label"===e&&(this.userGroup=!0)},onSubmit:function(){var e=this;this.$refs.roleForm.validate(function(t){t&&(e.roleForm.id?Object(n.updateRole)(e.roleForm).then(function(){return e.addOrDeleteUserByRole()}).then(function(){return e.addOrDeleteOrgByRole()}).then(function(){return e.addOrDeleteGroupByRole()}).then(function(){e.$message.success("更新角色成功")}):(e.roleForm.name||(e.roleForm.name=o.a.uuid(8)),Object(n.addRole)(e.roleForm).then(function(t){e.roleForm.id=t.data.id,e.addOrDeleteUserByRole()}).then(function(){return e.addOrDeleteOrgByRole()}).then(function(){return e.addOrDeleteGroupByRole()}).then(function(){e.$message.success("创建角色成功"),e.$router.push({name:"roleEdit",params:{id:e.roleForm.id}})})))})},hasUserSelected:function(e){this.userSelected=o.a.arrayDeduplication(e,"id")},hasUserEditSelected:function(e){this.userEditSelected=o.a.arrayDeduplication(e,"id")},clearUser:function(){this.userDeleted.push.apply(this.userDeleted,this.userEditPageModel.page),this.userEditPageModel.page=[],this.userEditPageModel.config.total=0,this.userDeleted=o.a.arrayDeduplication(this.userDeleted,"id")},deleteUser:function(){for(var e=[],t=0;t<this.userEditSelected.length;t++)for(var a=0;a<this.userEditPageModel.page.length;a++)this.userEditSelected[t].id===this.userEditPageModel.page[a].id&&(e.push(this.userEditPageModel.page[a]),this.userEditPageModel.page.splice(a,1));e.length>0&&(this.userDeleted.push.apply(this.userDeleted,e),this.userEditPageModel.config.total=this.userEditPageModel.page.length,this.userDeleted=o.a.arrayDeduplication(this.userDeleted,"id"))},addUser:function(){this.usersDialogVisible=!1,this.userEditPageModel.config.total=this.userEditPageModel.config.total+this.userSelected.length,this.userEditPageModel.config.pageSize=100,this.userEditPageModel.page=this.userEditPageModel.page.concat(this.userSelected),this.userEditPageModel.page=o.a.arrayDeduplication(this.userEditPageModel.page,"id")},hasOrgSelected:function(e){this.orgSelected=o.a.arrayDeduplication(e,"id")},hasOrgEditSelected:function(e){this.orgEditSelected=o.a.arrayDeduplication(e,"id")},clearOrg:function(){this.orgDeleted.push.apply(this.orgDeleted,this.orgEditPageModel.page),this.orgEditPageModel.page=[],this.orgEditPageModel.config.total=0,this.orgDeleted=o.a.arrayDeduplication(this.orgDeleted,"id")},deleteOrg:function(){for(var e=[],t=0;t<this.orgEditSelected.length;t++)for(var a=0;a<this.orgEditPageModel.page.length;a++)this.orgEditSelected[t].id===this.orgEditPageModel.page[a].id&&(e.push(this.orgEditPageModel.page[a]),this.orgEditPageModel.page.splice(a,1));e.length>0&&(this.orgDeleted.push.apply(this.orgDeleted,e),this.orgEditPageModel.config.total=this.orgEditPageModel.page.length,this.orgDeleted=o.a.arrayDeduplication(this.orgDeleted,"id"))},addOrg:function(){this.orgsDialogVisible=!1,this.orgEditPageModel.config.total=this.orgEditPageModel.config.total+this.orgSelected.length,this.orgEditPageModel.config.pageSize=100,this.orgEditPageModel.page=this.orgEditPageModel.page.concat(this.orgSelected),this.orgEditPageModel.page=o.a.arrayDeduplication(this.orgEditPageModel.page,"id")},hasGroupSelected:function(e){this.groupSelected=o.a.arrayDeduplication(e,"id")},hasGroupEditSelected:function(e){this.groupEditSelected=o.a.arrayDeduplication(e,"id")},clearGroup:function(){this.groupDeleted.push.apply(this.groupDeleted,this.groupEditPageModel.page),this.groupEditPageModel.page=[],this.groupEditPageModel.config.total=0,this.groupDeleted=o.a.arrayDeduplication(this.groupDeleted,"id")},deleteGroup:function(){for(var e=[],t=0;t<this.groupEditSelected.length;t++)for(var a=0;a<this.groupEditPageModel.page.length;a++)this.groupEditSelected[t].id===this.groupEditPageModel.page[a].id&&(e.push(this.groupEditPageModel.page[a]),this.groupEditPageModel.page.splice(a,1));e.length>0&&(this.groupDeleted.push.apply(this.groupDeleted,e),this.groupEditPageModel.config.total=this.groupEditPageModel.page.length,this.groupDeleted=o.a.arrayDeduplication(this.groupDeleted,"id"))},addGroup:function(){this.groupsDialogVisible=!1,this.groupEditPageModel.config.total=this.groupEditPageModel.config.total+this.groupSelected.length,this.groupEditPageModel.config.pageSize=100,this.groupEditPageModel.page=this.groupEditPageModel.page.concat(this.groupSelected),this.groupEditPageModel.page=o.a.arrayDeduplication(this.groupEditPageModel.page,"id")},openUserDialog:function(){var e=this;this.usersDialogVisible=!0;var t="";if(this.userEditPageModel.page&&this.userEditPageModel.page.length>0){t="id not in (";for(var a=[],l=0;l<this.userEditPageModel.page.length;l++)a.push(this.userEditPageModel.page[l].id);t+=a.join(","),t+=")"}Object(i.queryUser)({pageIndex:this.listUserQuery.pageIndex,pageSize:this.listUserQuery.pageSize,where:t}).then(function(t){e.userPageModel.config.total=t.data.total,e.userPageModel.config.pageSize=e.listUserQuery.pageSize,e.userPageModel.page=t.data.rows})},openOrgDialog:function(){var e=this;this.orgsDialogVisible=!0;var t="";if(this.orgEditPageModel.page&&this.orgEditPageModel.page.length>0){t="id not in (";for(var a=[],l=0;l<this.orgEditPageModel.page.length;l++)a.push(this.orgEditPageModel.page[l].id);t+=a.join(","),t+=")"}Object(r.queryOrg)({pageIndex:this.listOrgQuery.pageIndex,pageSize:this.listOrgQuery.pageSize,where:t}).then(function(t){e.orgPageModel.config.total=t.data.total,e.orgPageModel.config.pageSize=e.listOrgQuery.pageSize,e.orgPageModel.page=t.data.rows})},openGroupDialog:function(){var e=this;this.groupsDialogVisible=!0;var t="";if(this.groupEditPageModel.page&&this.groupEditPageModel.page.length>0){t="id not in (";for(var a=[],l=0;l<this.groupEditPageModel.page.length;l++)a.push(this.groupEditPageModel.page[l].id);t+=a.join(","),t+=")"}Object(s.queryGroup)({pageIndex:this.listGroupQuery.pageIndex,pageSize:this.listGroupQuery.pageSize,where:t}).then(function(t){e.groupPageModel.config.total=t.data.total,e.groupPageModel.config.pageSize=e.listGroupQuery.pageSize,e.groupPageModel.page=t.data.rows})},addOrDeleteUserByRole:function(){var e=this,t=new Promise(function(t,a){if(e.userSelected&&e.userSelected.length>0){for(var l=0;l<e.userSelected.length;l++)Object(n.addUserByRole)(e.roleForm.id,e.userSelected[l].id);t(!0)}else t(!0)}),a=new Promise(function(t,a){if(e.userDeleted&&e.userDeleted.length>0){for(var l=0;l<e.userDeleted.length;l++)Object(n.deleteUserByRole)(e.roleForm.id,e.userDeleted[l].id);t(!0)}else t(!0)});return Promise.all([t,a])},addOrDeleteOrgByRole:function(){var e=this,t=new Promise(function(t,a){if(e.orgSelected&&e.orgSelected.length>0){for(var l=0;l<e.orgSelected.length;l++)Object(n.addOrgByRole)(e.roleForm.id,e.orgSelected[l].id);t(!0)}else t(!0)}),a=new Promise(function(t,a){if(e.orgDeleted&&e.orgDeleted.length>0){for(var l=0;l<e.orgDeleted.length;l++)Object(n.deleteOrgByRole)(e.roleForm.id,e.orgDeleted[l].id);t(!0)}else t(!0)});return Promise.all([t,a])},addOrDeleteGroupByRole:function(){var e=this,t=new Promise(function(t,a){if(e.groupSelected&&e.groupSelected.length>0){for(var l=0;l<e.groupSelected.length;l++)Object(n.addGroupByRole)(e.roleForm.id,e.groupSelected[l].id);t(!0)}else t(!0)}),a=new Promise(function(t,a){if(e.groupDeleted&&e.groupDeleted.length>0){for(var l=0;l<e.groupDeleted.length;l++)Object(n.deleteGroupByRole)(e.roleForm.id,e.groupDeleted[l].id);t(!0)}else t(!0)});return Promise.all([t,a])}}},b=a("KHd+"),h=Object(b.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container ilayout-container"},[a("el-container",{staticClass:"sub"},[e.headerBar?e._e():a("el-header",[a("el-row",[a("router-link",{attrs:{to:"/setting/role"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("返回")])],1),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("上一条")]),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("下一条")]),e._v(" "),e.editable||e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.editable=!0}}},[e._v("编辑")]),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("保存")]):e._e(),e._v(" "),e.addable?e._e():a("router-link",{attrs:{to:"/setting/role/add"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-main",[a("el-collapse",{staticClass:"its_collapse",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-tabs",{staticClass:"its_tabs",attrs:{"tab-position":e.tabPosition,type:"border-card"}},[a("el-tab-pane",{attrs:{label:"概况"}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"roleForm",attrs:{"label-width":"80px",model:e.roleForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"角色标识",prop:"name"}},["admin"==e.roleForm.name?a("itsnow-text",{attrs:{readonly:""},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}}):"confadmin"==e.roleForm.name?a("itsnow-text",{attrs:{readonly:""},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}}):"wfadmin"==e.roleForm.name?a("itsnow-text",{attrs:{readonly:""},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}}):a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色名称"}},["admin"==e.roleForm.name?a("itsnow-text",{attrs:{readonly:""},model:{value:e.roleForm.label,callback:function(t){e.$set(e.roleForm,"label",t)},expression:"roleForm.label"}}):"confadmin"==e.roleForm.name?a("itsnow-text",{attrs:{readonly:""},model:{value:e.roleForm.label,callback:function(t){e.$set(e.roleForm,"label",t)},expression:"roleForm.label"}}):"wfadmin"==e.roleForm.name?a("itsnow-text",{attrs:{readonly:""},model:{value:e.roleForm.label,callback:function(t){e.$set(e.roleForm,"label",t)},expression:"roleForm.label"}}):a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.roleForm.label,callback:function(t){e.$set(e.roleForm,"label",t)},expression:"roleForm.label"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"标记",prop:"status"}},[a("itsnow-text",{attrs:{readonly:""},model:{value:e.roleForm.status,callback:function(t){e.$set(e.roleForm,"status",t)},expression:"roleForm.status"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:21,offset:1}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"描述",prop:"description"}},["admin"==e.roleForm.name?a("itsnow-textarea",{attrs:{readonly:""},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}}):"confadmin"==e.roleForm.name?a("itsnow-textarea",{attrs:{readonly:""},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}}):"wfadmin"==e.roleForm.name?a("itsnow-textarea",{attrs:{readonly:""},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}}):a("itsnow-textarea",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}})],1)],1)])],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"roleForm",attrs:{"label-width":"80px",model:e.roleForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"模块信息",name:"3"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[e.roleID>3?a("el-form-item",{attrs:{label:"模块",prop:"module"}},[a("el-col",{staticStyle:{width:"calc(100% - 32px)"},attrs:{span:24}},[a("el-select",{attrs:{filterable:"","allow-create":"",remote:"",size:"mini","popper-class":"its_multipleSelect_dropDown",multiple:"",placeholder:"请选择"},model:{value:e.choiceModule,callback:function(t){e.choiceModule=t},expression:"choiceModule"}})],1),e._v(" "),a("el-button",{staticClass:"inputBtn",attrs:{type:"primary",plain:"",size:"mini",icon:"iconfont icontable"},on:{click:function(t){e.dialogChoiceModule=!0}}})],1):e._e(),e._v(" "),1==e.roleID?a("el-form-item",{attrs:{label:"模块",prop:"module"}},[a("el-select",{attrs:{filterable:"","allow-create":"",remote:"",size:"mini",disabled:"","popper-class":"its_multipleSelect_dropDown",multiple:"",placeholder:"请选择"},model:{value:e.choiceModule1,callback:function(t){e.choiceModule1=t},expression:"choiceModule1"}})],1):e._e(),e._v(" "),2==e.roleID?a("el-form-item",{attrs:{label:"模块",prop:"module"}},[a("el-select",{attrs:{filterable:"","allow-create":"",remote:"",size:"mini",disabled:"","popper-class":"its_multipleSelect_dropDown",multiple:"",placeholder:"请选择"},model:{value:e.choiceModule2,callback:function(t){e.choiceModule2=t},expression:"choiceModule2"}})],1):e._e(),e._v(" "),3==e.roleID?a("el-form-item",{attrs:{label:"模块",prop:"module"}},[a("el-select",{attrs:{filterable:"","allow-create":"",remote:"",size:"mini",disabled:"","popper-class":"its_multipleSelect_dropDown",multiple:"",placeholder:"请选择"},model:{value:e.choiceModule3,callback:function(t){e.choiceModule3=t},expression:"choiceModule3"}})],1):e._e()],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"roleForm",attrs:{"label-width":"80px",model:e.roleForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"授权信息",name:"2"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"账户"}},[a("el-col",{staticClass:"form_tool"},[e.headerBar?e._e():a("el-col",{staticClass:"form_tool_bar"},[e.editable||e.addable?a("el-button",{attrs:{plain:"",type:"text",size:"mini"},on:{click:e.openUserDialog}},[e._v("新增")]):e._e(),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{plain:"",type:"text",size:"mini"},on:{click:e.deleteUser}},[e._v("删除")]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.usersDialogVisible,title:"账户",width:"860px"},on:{"update:visible":function(t){e.usersDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("itsnow-filter-page-list",{on:{rowAction:e.userRowAction,loadPage:e.loadUserPage,selected:e.hasUserSelected},scopedSlots:e._u([{key:"row",fn:function(t){var l=t.row,o=t.column;return["type"==o.name?a("div",["N"==l.type?a("span",[e._v("子账户")]):e._e(),e._v(" "),"V"==l.type?a("span",[e._v("虚拟账户")]):e._e()]):e._e(),e._v(" "),"locked"==o.name?a("div",[l.locked?a("span",{staticStyle:{color:"red"}},[e._v("锁定")]):e._e(),e._v(" "),l.locked?e._e():a("span",{staticStyle:{color:"#00c100"}},[e._v("解锁")])]):e._e()]}}],null,!1,299380456),model:{value:e.userPageModel,callback:function(t){e.userPageModel=t},expression:"userPageModel"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.usersDialogVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.accountInfo,title:"查看",width:"860px"},on:{"update:visible":function(t){e.accountInfo=t}}},[a("el-row",{staticClass:"its_dialogBody"},[a("account-Details",{attrs:{headerBar:"true",readonlyView:"true"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.accountInfo=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.accountInfo=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("itsnow-list",{attrs:{config:e.userEditPageModel.config,readonly:!e.editable&&!e.addable||e.readonlyView},on:{rowAction:e.userEditRowAction,selected:e.hasUserEditSelected},scopedSlots:e._u([{key:"row",fn:function(t){var l=t.row,o=t.column;return["type"==o.name?a("div",["N"==l.type?a("span",[e._v("子账户")]):e._e(),e._v(" "),"V"==l.type?a("span",[e._v("虚拟账户")]):e._e()]):e._e(),e._v(" "),"locked"==o.name?a("div",[l.locked?a("span",{staticStyle:{color:"red"}},[e._v("锁定")]):e._e(),e._v(" "),l.locked?e._e():a("span",{staticStyle:{color:"#00c100"}},[e._v("解锁")])]):e._e()]}}]),model:{value:e.userEditPageModel.page,callback:function(t){e.$set(e.userEditPageModel,"page",t)},expression:"userEditPageModel.page"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"账户组"}},[a("el-col",{staticClass:"form_tool"},[e.headerBar?e._e():a("el-col",{staticClass:"form_tool_bar"},[e.editable||e.addable?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.openGroupDialog}},[e._v("新增")]):e._e(),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:e.deleteGroup}},[e._v("删除")]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.groupsDialogVisible,title:"账户组",width:"750px"},on:{"update:visible":function(t){e.groupsDialogVisible=t}}},[a("itsnow-filter-page-list",{on:{rowAction:e.groupRowAction,loadPage:e.loadGroupPage,selected:e.hasGroupSelected},model:{value:e.groupPageModel,callback:function(t){e.groupPageModel=t},expression:"groupPageModel"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addGroup}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.groupsDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("itsnow-list",{attrs:{config:e.groupEditPageModel.config,readonly:!e.editable&&!e.addable||e.readonlyView},on:{rowAction:e.groupEditRowAction,selected:e.hasGroupEditSelected},model:{value:e.groupEditPageModel.page,callback:function(t){e.$set(e.groupEditPageModel,"page",t)},expression:"groupEditPageModel.page"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"部门"}},[a("el-col",{staticClass:"form_tool"},[e.headerBar?e._e():a("el-col",{staticClass:"form_tool_bar"},[e.editable||e.addable?a("el-button",{attrs:{type:"text",size:"mini",plain:""},on:{click:e.openOrgDialog}},[e._v("新增")]):e._e(),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{type:"text",size:"mini",plain:""},on:{click:e.deleteOrg}},[e._v("删除")]):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.orgsDialogVisible,title:"部门",width:"860px"},on:{"update:visible":function(t){e.orgsDialogVisible=t}}},[a("itsnow-filter-page-list",{on:{rowAction:e.orgRowAction,loadPage:e.loadOrgPage,selected:e.hasOrgSelected},model:{value:e.orgPageModel,callback:function(t){e.orgPageModel=t},expression:"orgPageModel"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addOrg}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.orgsDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1),e._v(" "),a("itsnow-list",{attrs:{config:e.orgEditPageModel.config,readonly:!e.editable&&!e.addable||e.readonlyView},on:{rowAction:e.orgEditRowAction,selected:e.hasOrgEditSelected},model:{value:e.orgEditPageModel.page,callback:function(t){e.$set(e.orgEditPageModel,"page",t)},expression:"orgEditPageModel.page"}})],1)],1)],1)],1)],1)],1)],1)],1)],1)],1)]),e._v(" "),e.roleID>3?a("el-tab-pane",{attrs:{label:"业务"}},[a("el-tabs",{staticClass:"its_tabs",attrs:{"tab-position":e.tabPosition2,type:"border-card"}},[a("el-tab-pane",{attrs:{label:"视图"}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"roleForm",attrs:{"label-width":"80px",model:e.roleForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"操作权限"}},[""!=e.checkListOperation?a("el-checkbox",{staticStyle:{float:"left"},attrs:{label:"查看",disabled:""},model:{value:e.chakan,callback:function(t){e.chakan=t},expression:"chakan"}}):a("el-checkbox",{staticStyle:{float:"left"},attrs:{label:"查看"},model:{value:e.chakan2,callback:function(t){e.chakan2=t},expression:"chakan2"}}),e._v(" "),a("el-checkbox-group",{staticStyle:{float:"left","margin-left":"8px"},model:{value:e.checkListOperation,callback:function(t){e.checkListOperation=t},expression:"checkListOperation"}},[a("el-checkbox",{attrs:{label:"编辑"}}),e._v(" "),a("el-checkbox",{attrs:{label:"删除"}}),e._v(" "),a("el-checkbox",{attrs:{label:"执行"}}),e._v(" "),a("el-checkbox",{attrs:{label:"新建"}})],1)],1),e._v(" "),1==e.chakan2||""!=e.checkListOperation?a("el-form-item",{attrs:{label:"行权限",prop:"description"}},[a("el-col",[a("el-radio-group",{model:{value:e.radio333,callback:function(t){e.radio333=t},expression:"radio333"}},[a("el-radio",{attrs:{label:1}},[e._v("默认(所有)")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("自定义")])],1)],1),e._v(" "),2==e.radio333?a("el-col",[a("el-col",{staticStyle:{width:"calc(100% - 32px)"},attrs:{span:24}},[a("el-input",{attrs:{type:"textarea",value:"data.indexOf('its_board'||'its_dash')"}})],1),e._v(" "),a("el-button",{staticClass:"inputBtn",attrs:{type:"primary",plain:"",size:"mini",icon:"iconfont icontable"},on:{click:function(t){e.dialogDashboard=!0}}})],1):e._e()],1):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"视图",visible:e.dialogDashboard,width:"860px",top:"3vh"},on:{"update:visible":function(t){e.dialogDashboard=t}}},[a("itsnow-filter"),e._v(" "),a("div",{staticClass:"its_table",staticStyle:{"padding-top":"0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.homepage,stripe:"","highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{width:"45",type:"selection",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"label",label:"视图标识","min-width":"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"视图名称","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("a",{on:{click:function(t){e.viewDashboard=!0}}},[e._v(e._s(t.row.name))])]}}],null,!1,1211891328)}),e._v(" "),a("el-table-column",{attrs:{prop:"describe",label:"描述","min-width":"250"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tab",label:"标记","min-width":"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"更新时间","min-width":"160"}})],1)],1),e._v(" "),a("div",{staticClass:"block its_pagination"},[a("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"page-sizes":[10,25,50,80,100],"page-size":25,total:3,background:"",layout:"total, sizes, prev, pager, next, jumper"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDashboard=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogDashboard=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)],1)],1)])],1)],1):e._e(),e._v(" "),e.roleID>3?a("el-tab-pane",{attrs:{label:"系统"}},[a("el-tabs",{staticClass:"its_tabs",attrs:{"tab-position":e.tabPosition2,type:"border-card"}},[a("el-tab-pane",{attrs:{label:"菜单"}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{ref:"roleForm",attrs:{"label-width":"80px",model:e.roleForm,rules:e.rules,"status-icon":""}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"操作权限"}},[""!=e.checkListOperation?a("el-checkbox",{staticStyle:{float:"left"},attrs:{label:"查看",disabled:""},model:{value:e.chakan,callback:function(t){e.chakan=t},expression:"chakan"}}):a("el-checkbox",{staticStyle:{float:"left"},attrs:{label:"查看"},model:{value:e.chakan2,callback:function(t){e.chakan2=t},expression:"chakan2"}}),e._v(" "),a("el-checkbox-group",{staticStyle:{float:"left","margin-left":"8px"},model:{value:e.checkListOperation,callback:function(t){e.checkListOperation=t},expression:"checkListOperation"}},[a("el-checkbox",{attrs:{label:"编辑"}}),e._v(" "),a("el-checkbox",{attrs:{label:"删除"}}),e._v(" "),a("el-checkbox",{attrs:{label:"执行"}}),e._v(" "),a("el-checkbox",{attrs:{label:"新建"}})],1)],1),e._v(" "),1==e.chakan?a("el-form-item",{attrs:{label:"行权限",prop:"description"}},[a("el-col",[a("el-radio-group",{model:{value:e.radio333,callback:function(t){e.radio333=t},expression:"radio333"}},[a("el-radio",{attrs:{label:1}},[e._v("默认(所有)")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("自定义")])],1)],1),e._v(" "),2==e.radio333?a("el-col",[a("el-col",{staticStyle:{width:"calc(100% - 32px)"},attrs:{span:24}},[a("el-input",{attrs:{type:"textarea",value:"monitorANDcmdbANDoperation"}})],1),e._v(" "),a("el-button",{staticClass:"inputBtn",attrs:{type:"primary",plain:"",size:"mini",icon:"iconfont icontable"},on:{click:function(t){e.resourceTypeDialogVisible=!0}}})],1):e._e()],1):e._e(),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"菜单",visible:e.resourceTypeDialogVisible,width:"220px",top:"8vh"},on:{"update:visible":function(t){e.resourceTypeDialogVisible=t}}},[a("el-row",{staticClass:"its_dialogBody"},[a("el-collapse",{staticClass:"its_collapse",model:{value:e.activeNamesTest,callback:function(t){e.activeNamesTest=t},expression:"activeNamesTest"}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{attrs:{"label-width":"100px",rules:e.rules}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-row",{staticClass:"its_card_body"},[a("el-header",{staticStyle:{margin:"0"}},[a("el-row",[a("itsnow-text",{staticStyle:{width:"100px"}}),e._v(" "),a("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"}}),e._v(" "),e.openFold?a("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder-opened"},on:{click:function(t){e.openFold=!1}}}):e._e(),e._v(" "),e.openFold?e._e():a("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder"},on:{click:function(t){e.openFold=!0}}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"margin-top":"5px"},attrs:{span:24}},[a("el-aside",{staticClass:"its_tree"},[a("el-tree",{attrs:{data:e.menuTree,props:e.defaultProps,"node-key":"id","show-checkbox":"","default-checked-keys":[1],"highlight-current":!0},on:{"node-click":e.onItemClick},scopedSlots:e._u([{key:"default",fn:function(t){var l=t.node,o=t.data;return a("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[a("el-row",[a("el-col",{attrs:{span:12}},[1==o.deleted?a("span",{staticStyle:{"text-decoration":"line-through"}},[e._v(e._s(l.label))]):null==o.id?a("span",[e._v(e._s(l.label))]):1==o.updated?a("span",[e._v("*"+e._s(l.label))]):a("span",[e._v(e._s(l.label))])])],1)],1)}}],null,!1,3994452500)})],1)],1)],1)],1)],1)],1)],1)])],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.resourceTypeDialogVisible=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.resourceTypeDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)],1)],1)])],1)],1):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.userGroup,title:"查看",width:"860px"},on:{"update:visible":function(t){e.userGroup=t}}},[a("el-row",{staticClass:"its_dialogBody"},[a("accountGroup-Details",{attrs:{headerBar:"true",readonlyView:"true"}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.userGroup=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.userGroup=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.dialogChoiceModule,title:"模块",width:"860px"},on:{"update:visible":function(t){e.dialogChoiceModule=t}}},[a("itsnow-filter-page-list",{on:{loadPage:e.loadUserPage},model:{value:e.moduleTable,callback:function(t){e.moduleTable=t},expression:"moduleTable"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogChoiceModule=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogChoiceModule=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.originGroup,title:"查看",width:"860px"},on:{"update:visible":function(t){e.originGroup=t}}},[a("el-row",{staticClass:"its_dialogBody"},[a("el-collapse",{staticClass:"its_collapse",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"80px",rules:e.rules}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"节点名称",prop:"label"}},[a("el-input",{attrs:{value:"技术研发部",disabled:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"节点分类"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.radioG,callback:function(t){e.radioG=t},expression:"radioG"}},[a("el-radio",{attrs:{label:1}},[e._v("公司")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("分公司")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("部门")])],1)],1)],1),e._v(" "),a("el-col",{staticClass:"mkk",attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"负责人"}},[a("el-input",{attrs:{value:"Hawk",disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{placeholder:"请输入",type:"textarea",disabled:""}})],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-form",{staticClass:"demo-ruleForm",attrs:{"label-width":"80px",rules:e.rules}},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"联系方式",name:"3"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"地址",prop:"region"}},[a("i-district",{attrs:{disabled:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{prop:"address","label-width":"0"}},[a("el-autocomplete",{attrs:{disabled:"",placeholder:"请选择"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"电话",prop:"phone"}},[a("itsnow-text",{attrs:{readonly:""}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"传真",prop:"fax"}},[a("itsnow-text",{attrs:{readonly:""}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"邮编",prop:"postcode"}},[a("itsnow-text",{attrs:{readonly:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("itsnow-text",{attrs:{readonly:""}})],1),e._v(" "),a("el-form-item",{attrs:{label:"网址",prop:"website"}},[a("itsnow-text",{attrs:{readonly:""}})],1)],1)],1)],1)],1)],1)],1)],1)],1)])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.originGroup=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.originGroup=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=h.exports},nKPK:function(e,t,a){"use strict";a.r(t);var l=a("+n12"),o=a("9kT/"),i=(a("Z6R/"),a("qW5P")),r=a("1x4Q"),s=a("Smy8"),n={components:{"account-Details":a("TXdC").default},name:"accountGroup_Details",props:{headerBar:{type:Boolean,default:function(){return!1}},readonlyView:{type:Boolean,default:function(){return!1}}},data:function(){return{activeNames:["1","2"],stateOptions:[{label:"系统",value:"system"},{label:"自定义",value:"custom"}],stateConfig:{disabled:!0},groupForm:{name:"",status:"custom"},accountInfo:!1,editable:!1,addable:!1,userPageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"账户",type:"link",router:{url:"/setting/account/view/{guserId}",params:["guserId"]},minwidth:"200"},{name:"fullname",label:"昵称",minwidth:"200"},{name:"locked",label:"状态",minwidth:"100",type:"template"},{name:"mobile",label:"手机",minwidth:"150"},{name:"user",label:"人员",minwidth:"150"},{name:"updated",label:"更新时间",minwidth:"160"}]},page:[]},userEditPageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"账户",type:"link",router:{url:"/setting/account/view/{guserId}",params:["guserId"]},minwidth:"150"},{name:"fullname",label:"昵称",minwidth:"150"},{name:"locked",label:"状态",width:"100",type:"template"},{name:"mobile",label:"手机",minwidth:"120"},{name:"user",label:"人员",minwidth:"150"},{name:"updated",label:"更新时间",minwidth:"160"}],actionWidth:"60",actions:[{name:"delete",label:"删除",icon:"el-icon-delete",type:"text"}]},page:[]},orgPageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"label",label:"名称",width:"200",type:""},{name:"updated",label:"更新日期",width:"200",type:""}]},page:[]},rolePageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"label",label:"名称",width:"200",type:""},{name:"updated",label:"更新日期",width:"150",type:""}]},page:[]},usersDialogVisible:!1,orgsDialogVisible:!1,rolesDialogVisible:!1,listUserQuery:{},rules:{label:[{required:!0,message:"请输入账户组名称",trigger:"blur"},{pattern:/^[a-zA-Z0-9_\-\(\)\[\]\{\}\u4E00-\u9FA5（）【】]{2,50}$/,message:"只能输入汉字、字母、数字和-_()[]{}，长度2~50个字符",trigger:"blur"}],description:[{max:255,message:"长度不超过255个字符",trigger:"blur"}]},userSelected:[],userEditSelected:[],userDeleted:[]}},created:function(){var e=this;/[^/]*\/edit\/[^/]*/.test(this.$route.path)&&(this.editable=!0),/[^/]*\/add/.test(this.$route.path)&&(this.addable=!0);var t=this.$route.params.id;t&&Object(r.getGroup)(t).then(function(t){e.groupForm=t.data}),this.loadUserEditPage()},mounted:function(){this.userPageModel.page=s.account,this.userEditPageModel.page=[s.account[0]]},methods:{loadUserPage:function(e,t){var a=this,l="";if(this.userEditPageModel.page&&this.userEditPageModel.page.length>0){l="id not in (";for(var i=[],r=0;r<this.userEditPageModel.page.length;r++)i.push(this.userEditPageModel.page[r].id);l+=i.join(","),l+=")"}Object(o.queryUser)({pageIndex:e,pageSize:t,where:l}).then(function(l){a.userPageModel.config.total=l.data.total,a.userPageModel.config.pageSize=t,a.userPageModel.page=l.data.rows,a.listUserQuery.pageIndex=e,a.listUserQuery.pageSize=t})},loadUserEditPage:function(e,t){var a=this,l=this.$route.params.id;l&&Object(r.queryUserByGroup)(l).then(function(e){a.userEditPageModel.config.total=e.data.length,a.userEditPageModel.config.pageSize=100,a.userEditPageModel.page=e.data})},userRowAction:function(e,t,a){"name"===e&&(this.accountInfo=!0)},userEditRowAction:function(e,t,a){"delete"===e?(this.userEditPageModel.page.splice(t,1),this.userDeleted.push(a),this.userDeleted=l.a.arrayDeduplication(this.userDeleted,"id")):"name"===e&&(this.accountInfo=!0)},orgRowAction:function(e,t,a){},loadRolePage:function(e,t){var a=this;Object(i.queryRole)({pageIndex:e,pageSize:t}).then(function(e){a.rolePageModel.config.total=e.data.total,a.rolePageModel.config.pageSize=t,a.rolePageModel.page=e.data.rows})},roleRowAction:function(e,t,a){},onSubmit:function(){var e=this;this.$refs.groupForm.validate(function(t){if(t)if(e.groupForm.id){if(!e.userEditPageModel.page||e.userEditPageModel.page.length<1)return void e.$message.error("必须关联至少一个账户！");Object(r.updateGroup)(e.groupForm).then(function(){return e.addOrDeleteUserByGroup()}).then(function(){e.$message.success("更新用户组成功")})}else{if(!e.userEditPageModel.page||e.userEditPageModel.page.length<1)return void e.$message.error("必须关联至少一个账户！");e.groupForm.name||(e.groupForm.name=l.a.uuid(8)),Object(r.addGroup)(e.groupForm).then(function(t){return e.groupForm.id=t.data.id,e.addOrDeleteUserByGroup()}).then(function(){e.$message.success("创建用户组成功"),e.$router.push({name:"groupEdit",params:{id:e.groupForm.id}})})}})},hasUserSelected:function(e){this.userSelected=l.a.arrayDeduplication(e,"id")},hasUserEditSelected:function(e){this.userEditSelected=l.a.arrayDeduplication(e,"id")},clearUser:function(){this.userDeleted.push.apply(this.userDeleted,this.userEditPageModel.page),this.userEditPageModel.page=[],this.userEditPageModel.config.total=0,this.userDeleted=l.a.arrayDeduplication(this.userDeleted,"id")},deleteUser:function(){for(var e=[],t=0;t<this.userEditSelected.length;t++)for(var a=0;a<this.userEditPageModel.page.length;a++)this.userEditSelected[t].id===this.userEditPageModel.page[a].id&&(e.push(this.userEditPageModel.page[a]),this.userEditPageModel.page.splice(a,1));e.length>0&&(this.userDeleted.push.apply(this.userDeleted,e),this.userEditPageModel.config.total=this.userEditPageModel.page.length,this.userDeleted=l.a.arrayDeduplication(this.userDeleted,"id"))},addUser:function(){this.usersDialogVisible=!1,this.userEditPageModel.config.total=this.userEditPageModel.config.total+this.userSelected.length,this.userEditPageModel.config.pageSize=100,this.userEditPageModel.page=this.userEditPageModel.page.concat(this.userSelected),this.userEditPageModel.page=l.a.arrayDeduplication(this.userEditPageModel.page,"id")},openUserDialog:function(){var e=this;this.usersDialogVisible=!0;var t="";if(this.userEditPageModel.page&&this.userEditPageModel.page.length>0){t="id not in (";for(var a=[],l=0;l<this.userEditPageModel.page.length;l++)a.push(this.userEditPageModel.page[l].id);t+=a.join(","),t+=")"}Object(o.queryUser)({pageIndex:this.listUserQuery.pageIndex,pageSize:this.listUserQuery.pageSize,where:t}).then(function(t){e.userPageModel.config.total=t.data.total,e.userPageModel.config.pageSize=e.listUserQuery.pageSize,e.userPageModel.page=t.data.rows})},addOrDeleteUserByGroup:function(){var e=this,t=new Promise(function(t,a){if(e.userSelected&&e.userSelected.length>0){for(var l=[],o=0;o<e.userSelected.length;o++)l.push(Object(r.addUserByGroup)(e.groupForm.id,e.userSelected[o].id));Promise.all(l).then(function(){return t(!0)})}else t(!0)}),a=new Promise(function(t,a){if(e.userDeleted&&e.userDeleted.length>0){for(var l=[],o=0;o<e.userDeleted.length;o++)l.push(Object(r.deleteUserByGroup)(e.groupForm.id,e.userDeleted[o].id));Promise.all(l).then(function(){return t(!0)})}else t(!0)});return Promise.all([t,a])}},watch:{}},d=(a("0gWk"),a("KHd+")),c=Object(d.a)(n,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"app-container ilayout-container"},[a("el-container",{staticClass:"sub"},[e.headerBar?e._e():a("el-header",[a("el-row",[a("router-link",{attrs:{to:"/setting/accountGroup"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("返回")])],1),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("上一条")]),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("下一条")]),e._v(" "),e.editable||e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.editable=!0}}},[e._v("编辑")]),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("保存")]):e._e(),e._v(" "),e.addable?e._e():a("router-link",{attrs:{to:"/setting/accountGroup/add"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-main",[a("el-collapse",{staticClass:"its_collapse",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-form",{ref:"groupForm",attrs:{"label-width":"95px",model:e.groupForm,rules:e.rules,"status-icon":""}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[a("div",{staticClass:"grid-content bg-purple"},[a("el-form-item",{attrs:{label:"账户组标识",prop:"label"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.groupForm.label,callback:function(t){e.$set(e.groupForm,"label",t)},expression:"groupForm.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"账户组名称"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.groupForm.label,callback:function(t){e.$set(e.groupForm,"label",t)},expression:"groupForm.label"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"标记",prop:"status"}},[a("itsnow-text",{attrs:{value:"自定义",readonly:""}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:21,offset:1}},[a("div",{staticClass:"grid-content bg-purple-light"},[a("el-form-item",{attrs:{label:"描述",prop:"description"}},[a("itsnow-textarea",{attrs:{readonly:!e.editable&&!e.addable||e.readonlyView},model:{value:e.groupForm.description,callback:function(t){e.$set(e.groupForm,"description",t)},expression:"groupForm.description"}})],1)],1)])],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row",staticStyle:{width:"100%"}},[a("el-col",{attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"关联账户",name:"2"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"账户"}},[a("el-col",{staticClass:"form_tool"},[e.headerBar||!e.editable&&!e.addable?e._e():a("el-col",{staticClass:"form_tool_bar"},[e.editable||e.addable?a("el-button",{attrs:{plain:"",type:"text",size:"mini"},on:{click:e.openUserDialog}},[e._v("新增")]):e._e(),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{plain:"",type:"text",size:"mini"},on:{click:e.deleteUser}},[e._v("删除")]):e._e()],1),e._v(" "),a("itsnow-list",{attrs:{config:e.userEditPageModel.config,readonly:!e.editable&&!e.addable||e.readonlyView},on:{rowAction:e.userEditRowAction,selected:e.hasUserEditSelected},scopedSlots:e._u([{key:"row",fn:function(t){var l=t.row,o=t.column;return["type"==o.name?a("div",["N"==l.type?a("span",[e._v("子账户")]):e._e(),e._v(" "),"V"==l.type?a("span",[e._v("虚拟账户")]):e._e()]):e._e(),e._v(" "),"locked"==o.name?a("div",[l.locked?a("span",{staticStyle:{color:"red"}},[e._v("锁定")]):e._e(),e._v(" "),l.locked?e._e():a("span",{staticStyle:{color:"#00c100"}},[e._v("解锁")])]):e._e()]}}]),model:{value:e.userEditPageModel.page,callback:function(t){e.$set(e.userEditPageModel,"page",t)},expression:"userEditPageModel.page"}})],1)],1)],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.usersDialogVisible,title:"账户",width:"860px"},on:{"update:visible":function(t){e.usersDialogVisible=t}}},[a("el-row",[a("el-col",{attrs:{span:24}},[a("itsnow-filter-page-list",{on:{rowAction:e.userRowAction,loadPage:e.loadUserPage,selected:e.hasUserSelected},scopedSlots:e._u([{key:"row",fn:function(t){var l=t.row,o=t.column;return["type"==o.name?a("div",["N"==l.type?a("span",[e._v("子账户")]):e._e(),e._v(" "),"V"==l.type?a("span",[e._v("虚拟账户")]):e._e()]):e._e(),e._v(" "),"locked"==o.name?a("div",[l.locked?a("span",{staticStyle:{color:"red"}},[e._v("停用")]):e._e(),e._v(" "),l.locked?e._e():a("span",{staticStyle:{color:"#00c100"}},[e._v("启用")])]):e._e()]}}]),model:{value:e.userPageModel,callback:function(t){e.userPageModel=t},expression:"userPageModel"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.usersDialogVisible=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)],1)],1)],1)])],1),e._v(" "),a("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{visible:e.accountInfo,title:"查看",width:"860px"},on:{"update:visible":function(t){e.accountInfo=t}}},[a("el-row",{staticClass:"its_dialogBody"},[a("account-Details",{attrs:{headerBar:!0,readonlyView:!0}})],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.accountInfo=!1}}},[e._v("确 定")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.accountInfo=!1}}},[e._v("取 消")])],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=c.exports},qW5P:function(e,t,a){"use strict";function l(e){e||(e={});var t={};return e.pageIndex?t.pageNum=e.pageIndex:t.pageNum=1,e.pageSize?t.pageSize=e.pageSize:t.pageSize=10,t.name=e.name,t.where=e.where,passportRequest({url:"/api/v2/roles",method:"get",params:t})}function o(e){return passportRequest({url:"/api/v2/roles/"+e,method:"get"})}function i(e){return passportRequest({url:"/api/v2/roles",method:"post",data:e})}function r(e){return passportRequest({url:"/api/v2/roles/"+e.id,method:"put",data:e})}function s(e){return passportRequest({url:"/api/v2/roles/"+e,method:"delete"})}function n(e){return passportRequest({url:"/api/v2/roles/"+e+"/users",method:"get"})}function d(e){return passportRequest({url:"/api/v2/roles/"+e+"/orgs",method:"get"})}function c(e){return passportRequest({url:"/api/v2/roles/"+e+"/groups",method:"get"})}function u(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/users/"+t,method:"post"})}function p(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/orgs/"+t,method:"post"})}function m(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/groups/"+t,method:"post"})}function g(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/users/"+t,method:"delete"})}function b(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/orgs/"+t,method:"delete"})}function h(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/groups/"+t,method:"delete"})}a.r(t),a.d(t,"queryRole",function(){return l}),a.d(t,"getRole",function(){return o}),a.d(t,"addRole",function(){return i}),a.d(t,"updateRole",function(){return r}),a.d(t,"deleteRole",function(){return s}),a.d(t,"queryUserByRole",function(){return n}),a.d(t,"queryOrgByRole",function(){return d}),a.d(t,"queryGroupByRole",function(){return c}),a.d(t,"addUserByRole",function(){return u}),a.d(t,"addOrgByRole",function(){return p}),a.d(t,"addGroupByRole",function(){return m}),a.d(t,"deleteUserByRole",function(){return g}),a.d(t,"deleteOrgByRole",function(){return b}),a.d(t,"deleteGroupByRole",function(){return h})},"u1q/":function(e,t,a){"use strict";var l=a("6Xwx");a.n(l).a},woN4:function(e,t,a){}}]);