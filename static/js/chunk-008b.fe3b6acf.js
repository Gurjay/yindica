(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-008b","d98f","3K/k"],{"3K/k":function(e,t,a){"use strict";a.r(t);var r=a("v0Ws");t.default={queryForms:function(e,t,a){var n={name:e,pageNo:t,pageSize:a};return Object(r.f)({url:"api/v2/forms",method:"get",params:n})},getForm:function(e){return Object(r.f)({url:"api/v2/forms/"+e,method:"get"})},createForm:function(e){return Object(r.f)({url:"api/v2/forms",method:"post",data:e})},updateForm:function(e,t){return Object(r.f)({url:"api/v2/forms/"+e,method:"put",data:t})},deleteForm:function(e){return Object(r.f)({url:"api/v2/forms/"+e,method:"delete"})}}},"VF+M":function(e,t,a){"use strict";a.r(t);var r=a("Rx2V"),n=a("Ldxb"),i=(a("zX5h"),a("3K/k")),o=a("d98f");function l(e){var t={};t.id=e.id,t.name=e.name,t.label=e.label,t.bindName=e.bindName,t.description=e.description,t.parent=e.parent,t.hidden=e.hidden,t.readonly=e.readonly,t.properties=e.properties,t.width=e.width;var a=r.default.getInfo(e.type);return t.type=e.type,t.editorView=a.editorView,t.setting=a.setting,t.view=a.view,t.children=[],t.height=50,null!=e.properties&&(t.properties=JSON.parse(e.properties)),t}var u={props:["menuName","formName"],components:{overviewPad:n.default},data:function(){return{form:{fields:[]},objectData:{},backPath:""}},created:function(){var e=this;this.backPath=this.$route.path.replace("/add",""),i.default.getForm(this.formName).then(function(t){var a=function(e){var t={};t.name=e.name,t.label=e.label,t.category=e.category,t.bindType="2",t.bindName=e.bindName,t.description=e.description,t.id=e.id,t.category=e.category,t.fields=[];for(var a=new Map,r=[],n=0;n<e.fields.length;n++){var i=e.fields[n],o=l(i);null==i.parent||""==i.parent?a.set(i.name,o):r.push(o)}for(var u=0;u<r.length;u++){var d=r[u].parent;a.get(d).children.push(r[u])}var s=!0,c=!1,f=void 0;try{for(var p,m=a.values()[Symbol.iterator]();!(s=(p=m.next()).done);s=!0){var v=p.value;t.fields.push(v)}}catch(e){c=!0,f=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw f}}return t}(t);e.form=a})},methods:{padStyle:function(e){var t="auto";return null!=e&&(t=e+"px"),{padding:"10px",background:"#e5e9f2",height:t}},saveData:function(){var e=this;o.default.createData(this.formName,this.objectData).then(function(t){200==t.status&&null!=t.data&&null!=t.data.id?(e.$message({message:"保存成功",type:"success"}),e.$router.push({name:e.menuName+"edit",params:{id:t.data.id}})):e.$message({message:"保存失败:"+t.message,type:"error"})})}},watch:{objectData:function(e){}},computed:{}},d=a("KHd+"),s=Object(d.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-row",[a("router-link",{attrs:{to:e.backPath}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("返回")])],1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.saveData}},[e._v("保存")])],1)],1),e._v(" "),a("el-main",[a("el-row",[a("el-col",{staticStyle:{"overflow-y":"auto","max-height":"650px"}},e._l(e.form.fields,function(t,r){return a("el-col",{key:r,style:e.padStyle(t.properties.height),attrs:{span:t.width}},[null!=t.bindName&&""!=t.bindName?a("overview-pad",{attrs:{label:t.label,value:e.objectData[t.bindName],field:t},on:{"update:value":function(a){return e.$set(e.objectData,t.bindName,a)}}}):a("overview-pad",{attrs:{label:t.label,field:t}})],1)}),1)],1)],1)],1)},[],!1,null,null,null);t.default=s.exports},d98f:function(e,t,a){"use strict";a.r(t);var r=a("v0Ws");t.default={queryData:function(e,t,a){var n={formName:e,pageNo:t,pageSize:a};return Object(r.f)({url:"api/v2/formData",method:"get",params:n})},getData:function(e,t,a){null==a&&(a=0);var n={formRevision:a};return Object(r.f)({url:"api/v2/formData/"+e+"/"+t,method:"get",params:n})},createData:function(e,t){return Object(r.f)({url:"api/v2/formData/"+e,method:"post",data:t})},updateData:function(e,t){return Object(r.f)({url:"api/v2/formData/"+e,method:"put",data:t})},deleteData:function(e,t){return Object(r.f)({url:"api/v2/formData/"+e+"/"+t,method:"delete"})}}},zX5h:function(e,t,a){"use strict";a.r(t);var r={props:["form"],components:{overviewPad:a("Ldxb").default},data:function(){return{activeName:"form"}},methods:{padStyle:function(e){var t="auto";return null!=e&&(t=e+"px"),{padding:"0px",background:"#fff",height:t}}},watch:{},computed:{}},n=a("KHd+"),i=Object(n.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-main",{staticStyle:{"overflow-y":"auto","max-height":"calc(100vh - 210px)"}},e._l(e.form.fields,function(t,r){return a("el-col",{key:r,style:e.padStyle(t.properties.height),attrs:{span:t.width}},[a("overview-pad",{attrs:{label:t.label,value:t.label,field:t}})],1)}),1)},[],!1,null,null,null);t.default=i.exports}}]);