(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b3ab","9kT/"],{"6UrD":function(e,t,n){"use strict";var r=n("GhjI");n.n(r).a},"9kT/":function(e,t,n){"use strict";function r(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),e.associations||(e.associations="department,company"),e.order||(e.order="updateTime desc"),itsmRequest({url:"/api/v1/ci/UserView",method:"get",params:e})}function a(e,t){return t||(t={}),t.associations||(t.associations="roles,department,company,groups"),itsmRequest({url:"/api/v1/ci/UserView/"+e,method:"get",params:t})}function o(){return itsmRequest({url:"/api/v1/ci/Person/count/byCompany",method:"get"})}function s(e){return itsmRequest({url:"/api/v1/ci/Person/count/byDepartment/"+e,method:"get"})}function u(e){return itsmRequest({url:"/api/v1/ci/Person",method:"post",data:e})}function i(e){return itsmRequest({url:"/api/v1/ci/Person/"+e.id,method:"put",data:e})}function c(e){return itsmRequest({url:"/api/v1/ci/Person/"+e,method:"delete"})}function l(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),itsmRequest({url:"/api/v1/ci/TitleEnum",method:"get",params:e})}function d(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),itsmRequest({url:"/api/v1/ci/AccountTypeEnum",method:"get",params:e})}function p(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),itsmRequest({url:"/api/v1/ci/AccountStateEnum",method:"get",params:e})}function m(e){return itsmRequest({url:"/api/v1/passopen/send/"+e+"/pin",method:"get"})}function f(e){e||(e={});var t={};return e.pageIndex?t.pageNum=e.pageIndex:t.pageNum=1,e.pageSize?t.pageSize=e.pageSize:t.pageSize=10,t.where=e.where,passportRequest({url:"/api/v2/users",method:"get",params:t})}function g(e){return passportRequest({url:"/api/v2/users/"+e,method:"get"})}function h(e){return passportRequest({header:"itsm",url:"/api/v2/users",method:"post",data:e})}function b(e){return passportRequest({url:"/api/v2/users/"+e.id,method:"put",data:e})}function v(e){return passportRequest({url:"/api/v2/users/"+e,method:"delete"})}function y(e){return passportRequest({url:"/api/v2/users/"+e+"/status",method:"put",params:{value:"unlock"}})}function w(e){return passportRequest({url:"/api/v2/users/"+e+"/status",method:"put",params:{value:"lock"}})}function q(e){return passportRequest({url:"/api/v2/users/"+e+"/exit",method:"put"})}function x(e){return passportRequest({url:"/api/v2/users/"+e+"/roles",method:"get"})}function _(e,t){return passportRequest({url:"/api/v2/users/"+e+"/roles/"+t,method:"post"})}function R(e,t){return passportRequest({url:"/api/v2/users/"+e+"/roles/"+t,method:"delete"})}function k(e){return passportRequest({url:"/api/v2/users/"+e+"/orgs",method:"get"})}n.r(t),n.d(t,"queryPerson",function(){return r}),n.d(t,"getPerson",function(){return a}),n.d(t,"countPersonByCompany",function(){return o}),n.d(t,"countPersonByDepartment",function(){return s}),n.d(t,"addPerson",function(){return u}),n.d(t,"updatePerson",function(){return i}),n.d(t,"deletePerson",function(){return c}),n.d(t,"queryTitleEnum",function(){return l}),n.d(t,"queryAccountTypeEnum",function(){return d}),n.d(t,"queryAccountStateEnum",function(){return p}),n.d(t,"sendPin",function(){return m}),n.d(t,"queryUser",function(){return f}),n.d(t,"getUser",function(){return g}),n.d(t,"addUser",function(){return h}),n.d(t,"updateUser",function(){return b}),n.d(t,"deleteUser",function(){return v}),n.d(t,"enableUser",function(){return y}),n.d(t,"disableUser",function(){return w}),n.d(t,"exitUser",function(){return q}),n.d(t,"queryRoleByUser",function(){return x}),n.d(t,"addRoleByUser",function(){return _}),n.d(t,"deleteRoleByUser",function(){return R}),n.d(t,"queryOrgByUser",function(){return k})},Adpu:function(e,t,n){"use strict";var r=n("pC/l");n.n(r).a},GhjI:function(e,t,n){},cwh0:function(e,t,n){"use strict";n.r(t);var r=n("9kT/"),a=n("Smy8"),o={data:function(){return{dataAccound:[],pageModel:{},queryList:{},selected:[],topButtonsMap:{}}},created:function(){this.pageModel={config:{readonly:!1,columns:[{name:"name",label:"账户",type:"template",minwidth:"200"},{name:"fullname",label:"昵称",minwidth:"200"},{name:"locked",label:"状态",minwidth:"100",type:"template"},{name:"mobile",label:"手机",minwidth:"150"},{name:"user",label:"人员",type:"template",minwidth:"150"},{name:"updated",label:"更新时间",minwidth:"160"}],actionWidth:"90",actions:[{name:"enable",label:"解锁",icon:"el-icon-unlock",isExclusion:!0,validation:function(e){return"锁定"==e.locked}},{name:"disable",label:"锁定",icon:"el-icon-lock",isExclusion:!0,validation:function(e){return"解锁"==e.locked}},{name:"edit",label:"编辑",icon:"el-icon-edit"},{name:"delete",label:"删除",icon:"el-icon-delete",validation:function(e){if("锁定"==e.locked)return!0}}]},page:[]},this.initTopButton()},watch:{},mounted:function(){this.pageModel.page=a.account,this.dataAccound=a.account},methods:{loadPage:function(e,t){},deleteUser:function(e){var t=this;return new Promise(function(n,a){Object(r.deleteUser)(e.id).then(function(e){400===e.status&&a(e),t.loadPage(t.queryList.pageIndex,t.queryList.pageSize),n(!0)})})},rowAction:function(e,t,n){var a=this;"edit"===e?this.$router.push({name:"accountEdit",params:{id:n.guserId}}):"delete"===e?this.$confirm("此操作将永久删除, 是否继续?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){a.deleteUser(n).then(function(){return a.$message.success("删除成功!")})}):"enable"===e?Object(r.enableUser)(n.id).then(function(e){a.$message.success("解锁用户成功"),a.loadPage(a.queryList.pageIndex,a.queryList.pageSize)},function(e){return a.$message.error(e)}):"disable"===e?Object(r.disableUser)(n.id).then(function(e){a.$message.success("锁定用户成功"),a.loadPage(a.queryList.pageIndex,a.queryList.pageSize)},function(e){return a.$message.error(e)}):"exit"===e&&Object(r.exitUser)(n.id).then(function(e){a.$message.success("强退用户成功"),a.loadPage(a.queryList.pageIndex,a.queryList.pageSize)},function(e){return a.$message.error(e)})},hasSelected:function(e){this.selected=e},initTopButton:function(){var e=this;this.topButtonsMap={add:{name:"add",label:"新增",action:function(t){e.$router.push({name:"accountAdd"})},noLoading:!0,noNeedSelect:!0},remove:{name:"remove",label:"删除",noNeedLoop:!0,noLoading:!0,confirm:"确定要删除选中的实例?",noNeedSelect:!0}}}}},s=(n("Adpu"),n("6UrD"),n("KHd+")),u=Object(s.a)(o,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"app-container ilayout-container"},[n("el-container",[n("el-main",[n("itsnow-filter",{scopedSlots:e._u([{key:"headers",fn:function(){return[n("el-header",{staticClass:"indexHeader"},[n("el-row",{staticClass:"btnGroup"},[n("i-top-button",{attrs:{buttonsMap:e.topButtonsMap,selected:e.selected}})],1)],1)]},proxy:!0}])}),e._v(" "),n("div",{staticClass:"its_table",staticStyle:{"padding-top":"0"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataAccound,stripe:"",fit:"",border:""}},[n("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"账户","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("router-link",{attrs:{to:"/setting/account/view/2"}},["xiaohong_wang"==t.row.name?n("a",[e._v(e._s(t.row.name))]):e._e()]),e._v(" "),n("router-link",{attrs:{to:"/setting/account/view/1"}},["xiaohong_wang"!=t.row.name?n("a",[e._v(e._s(t.row.name))]):e._e()])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"fullname",label:"昵称","min-width":"200"}}),e._v(" "),n("el-table-column",{attrs:{prop:"mobile",label:"手机","min-width":"120"}}),e._v(" "),n("el-table-column",{attrs:{prop:"user",label:"人员","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["--"==t.row.user?n("span",[e._v(e._s(t.row.user))]):n("a",[e._v(e._s(t.row.user))])]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"updated",label:"更新日期","min-width":"160"}}),e._v(" "),e.editable?e._e():n("el-table-column",{attrs:{label:"操作",fixed:"right",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"}})],1),e._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top-start"}},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-delete"}})],1)]}}],null,!1,1101508758)})],1)],1),e._v(" "),n("div",{staticClass:"block its_pagination"},[n("el-pagination",{staticStyle:{"text-align":"center"},attrs:{"page-sizes":[10,25,50,80,100],"page-size":25,total:4,background:"",layout:"total, sizes, prev, pager, next, jumper"}})],1)],1)],1)],1)},[],!1,null,"6d512724",null);t.default=u.exports},"pC/l":function(e,t,n){}}]);