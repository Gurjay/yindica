(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4fd4","Ff/F"],{"3wQi":function(e,t,a){"use strict";var o=a("ajN+");a.n(o).a},"Ff/F":function(e,t,a){"use strict";a.r(t),a.d(t,"queryCompany",function(){return r}),a.d(t,"addCompany",function(){return n}),a.d(t,"updateCompany",function(){return s}),a.d(t,"deleteCompany",function(){return l}),a.d(t,"getCompany",function(){return i}),a.d(t,"queryCompanySortEnum",function(){return c}),a.d(t,"queryCompanyLogoEnum",function(){return m});var o=a("v0Ws");function r(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),e.pageSize||(e.pageSize=-1),Object(o.d)({url:"/api/v1/ci/Company",method:"get",params:e})}function n(e){return Object(o.d)({url:"/api/v1/ci/Company",method:"post",data:e})}function s(e){return Object(o.d)({url:"/api/v1/ci/Company/"+e.id,method:"put",data:e})}function l(e){return Object(o.d)({url:"/api/v1/ci/Company/"+e,method:"delete"})}function i(e){return Object(o.d)({url:"/api/v1/ci/Company/"+e,method:"get"})}function c(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),Object(o.d)({url:"/api/v1/ci/CompanySortEnum",method:"get",params:e})}function m(e){return e||(e={}),e.pageIndex&&(e.pageIndex=e.pageIndex-1),Object(o.d)({url:"/api/v1/ci/CompanyLogoEnum",method:"get",params:e})}},"ajN+":function(e,t,a){},ngrS:function(e,t,a){"use strict";a.r(t);var o=a("Ff/F"),r=(a("S+eF"),{data:function(){return{activeNames:["1","2"],registerDate:{type:"date",placeholder:"请选择日期"},checkListSort:[],logoOptions:[],companyForm:{label:"",short:"",sort:["1","2"],country:"中国",classType:"Company",status:"1"},sortConfig:{options:[],disabled:!1},countryConfig:{disabled:!0},editable:!1,addable:!1,rules:{label:[{required:!0,message:"请输入公司名称",trigger:"blur"},{pattern:/^[a-zA-Z0-9_\-\(\)\[\]\{\}\u4E00-\u9FA5（）【】]{6,50}$/,message:"支持字母、数字、汉字及‘-_[](){}’组合，长度6-50！",trigger:"blur"}],short:[{max:20,message:"长度不超过20个字符",trigger:"blur"}],sort:[{required:!0,message:"请输入选择公司分类",trigger:"blur"}],address:[{required:!0,message:"请输入公司地址",trigger:"blur"}],region:[{required:!0,message:"请输入公司所在地",trigger:"blur"}],description:[{max:255,message:"长度不超过255个字符",trigger:"blur"}],phone:[{max:20,message:"长度不超过20个字符",trigger:"blur"}],fax:[{max:20,message:"长度不超过20个字符",trigger:"blur"}],postcode:[{pattern:/^\d{6}$/,message:"请输入正确的邮编！",trigger:"blur"}],email:[{pattern:/^[A-Za-z\d]+([\-_\.][A-Za-z\d]+)*@([A-Za-z\d]+[\-\.])+[A-Za-z\d]{2,5}$/,message:"请输入正确的email！",trigger:"blur"}],website:[{max:50,message:"长度不超过50个字符",trigger:"blur"}],helpline:[{pattern:/^(((800|400)\d{7})|([1-9]\d{4}))$/,message:"请输入正确的服务热线！",trigger:"blur"}],businessHotline:[{pattern:/^(((800|400)\d{7})|([1-9]\d{4}))$/,message:"请输入正确的业务热线！",trigger:"blur"}]}}},created:function(){var e=this;/[^/]*\/edit\/[^/]*/.test(this.$route.path)&&(this.editable=!0),/[^/]*\/add/.test(this.$route.path)&&(this.addable=!0);var t=this.$route.params.id;t?Object(o.getCompany)(t).then(function(t){e.companyForm=t,e.queryCompanySortEnum().then(function(t){"0"==e.companyForm.sort[0]?(e.sortConfig.options=t.filter(function(e){return"1"!=e.value&&"2"!=e.value}),e.sortConfig.disabled=!0):(e.sortConfig.options=t.filter(function(e){return"0"!=e.value}),e.sortConfig.disabled=!1)})}):this.queryCompanySortEnum().then(function(t){e.sortConfig.options=t.filter(function(e){return"0"!=e.value}),e.sortConfig.disabled=!1}),Object(o.queryCompanyLogoEnum)().then(function(t){if(e.logoOptions=[],t&&t.body&&t.body.length>0)for(var a=0;a<t.body.length;a++){var o=t.body[a];e.logoOptions.push({label:o.enumLabel,value:o.enumValue})}})},methods:{onSubmit:function(){var e=this;this.$refs.companyForm.validate(function(t){t&&(e.companyForm.id?Object(o.updateCompany)(e.companyForm).then(function(){e.$message.success("更新公司信息成功")}):Object(o.addCompany)(e.companyForm).then(function(t){e.$message.success("创建公司信息成功"),e.$router.push({name:"companyEdit",params:{id:t.id}})}))})},queryCompanySortEnum:function(){return new Promise(function(e,t){Object(o.queryCompanySortEnum)().then(function(t){var a=[];if(t&&t.body&&t.body.length>0){for(var o=0;o<t.body.length;o++){var r=t.body[o];a.push({label:r.enumLabel,value:r.enumValue})}e(a)}})})}},watch:{}}),n=(a("3wQi"),a("KHd+")),s=Object(n.a)(r,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container ilayout-container sub"},[a("el-header",[a("el-row",[a("router-link",{attrs:{to:"/setting/company"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("返回")])],1),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("上一条")]),e._v(" "),e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("下一条")]),e._v(" "),e.editable||e.addable?e._e():a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.editable=!0}}},[e._v("编辑")]),e._v(" "),e.editable||e.addable?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onSubmit}},[e._v("保存")]):e._e(),e._v(" "),e.addable?e._e():a("router-link",{attrs:{to:"/setting/company/add"}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("新增")])],1)],1)],1),e._v(" "),a("el-main",[a("el-collapse",{staticClass:"its_collapse",model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("el-form",{ref:"companyForm",attrs:{"label-width":"80px",model:e.companyForm,rules:e.rules,"status-icon":""}},[a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"公司名称",prop:"label"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.label,callback:function(t){e.$set(e.companyForm,"label",t)},expression:"companyForm.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司简称",prop:"short"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.short,callback:function(t){e.$set(e.companyForm,"short",t)},expression:"companyForm.short"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"注册时间",prop:"registerDate"}},[a("i-date-time-picker",{attrs:{config:e.registerDate,readonly:!e.editable&&!e.addable},model:{value:e.companyForm.registerDate,callback:function(t){e.$set(e.companyForm,"registerDate",t)},expression:"companyForm.registerDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司分类",prop:"sort"}},[a("el-checkbox-group",{staticStyle:{height:"26px"},model:{value:e.checkListSort,callback:function(t){e.checkListSort=t},expression:"checkListSort"}},[a("el-checkbox",{attrs:{label:"我的客户"}}),e._v(" "),a("el-checkbox",{attrs:{label:"我的供应商"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:21,offset:1}},[a("el-form-item",{attrs:{label:"描述"}},[a("itsnow-textarea",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.description,callback:function(t){e.$set(e.companyForm,"description",t)},expression:"companyForm.description"}})],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"its_det"},[a("el-row",{staticClass:"its_form_row"},[a("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[a("el-card",{staticClass:"box-card",attrs:{shadow:"naver"}},[a("el-collapse-item",{attrs:{title:"联系方式",name:"2"}},[a("div",{staticClass:"clearfix its_card_header"}),e._v(" "),a("el-row",{staticClass:"its_card_body"},[a("el-col",{attrs:{span:10,offset:1}},[a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form-item",{attrs:{label:"公司地址",prop:"region"}},[a("i-district",{attrs:{disabled:!e.editable&&!e.addable},model:{value:e.companyForm.region,callback:function(t){e.$set(e.companyForm,"region",t)},expression:"companyForm.region"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{prop:"address","label-width":"0"}},[a("el-autocomplete",{attrs:{placeholder:"请选择",disabled:!e.editable&&!e.addable},model:{value:e.companyForm.address,callback:function(t){e.$set(e.companyForm,"address",t)},expression:"companyForm.address"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公司电话",prop:"phone"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.phone,callback:function(t){e.$set(e.companyForm,"phone",t)},expression:"companyForm.phone"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公司传真",prop:"fax"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.fax,callback:function(t){e.$set(e.companyForm,"fax",t)},expression:"companyForm.fax"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公司邮箱",prop:"email"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.email,callback:function(t){e.$set(e.companyForm,"email",t)},expression:"companyForm.email"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10,offset:1}},[a("el-form-item",{attrs:{label:"公司邮编",prop:"postcode"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.postcode,callback:function(t){e.$set(e.companyForm,"postcode",t)},expression:"companyForm.postcode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公司网址",prop:"website"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.website,callback:function(t){e.$set(e.companyForm,"website",t)},expression:"companyForm.website"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务热线",prop:"helpline"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.helpline,callback:function(t){e.$set(e.companyForm,"helpline",t)},expression:"companyForm.helpline"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"业务热线",prop:"businessHotline"}},[a("itsnow-text",{attrs:{readonly:!e.editable&&!e.addable},model:{value:e.companyForm.businessHotline,callback:function(t){e.$set(e.companyForm,"businessHotline",t)},expression:"companyForm.businessHotline"}})],1)],1)],1)],1)],1)],1)],1)],1)])],1)],1)],1)},[],!1,null,null,null);t.default=s.exports}}]);