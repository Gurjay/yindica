(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-60b5","qW5P"],{o3zR:function(e,t,n){"use strict";n.r(t);var o=n("qW5P"),r=n("Smy8"),u={data:function(){return{pageModel:{config:{selectionMode:"selection",readonly:!1,columns:[{name:"name",label:"角色标识",minwidth:"150"},{name:"label",label:"角色名称",type:"link",minwidth:"200",router:{url:"/setting/role/view/{id}",params:["id"]}},{name:"description",label:"描述",minwidth:"350"},{name:"status",label:"标记",minwidth:"100",type:"template"},{name:"updated",label:"更新时间",minwidth:"160"}],actionWidth:"70",actions:[{name:"edit",icon:"el-icon-edit",label:"编辑",type:"text"},{name:"delete",label:"删除",icon:"el-icon-delete",type:"text",validation:function(e){return"自定义"==e.status}}]},page:[]},queryList:{},selected:[],topButtonsMap:{}}},created:function(){this.initTopButton()},mounted:function(){this.pageModel.page=r.role},methods:{rowAction:function(e,t,n){var r=this;"edit"===e?this.$router.push({name:"roleEdit",params:{data:n,id:n.id}}):"delete"===e&&this.$confirm("此操作将永久删除, 是否继续?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){Object(o.deleteRole)(n.id).then(function(){r.$message.success("删除成功!"),r.loadPage(r.queryList.pageIndex,r.queryList.pageSize)})})},hasSelected:function(e){this.selected=e},initTopButton:function(){var e=this;this.topButtonsMap={add:{name:"add",label:"新增",action:function(t){e.$router.push({name:"roleAdd"})},noLoading:!0,noNeedSelect:!0},remove:{name:"remove",label:"删除",noNeedLoop:!0,action:function(t){for(var n=[],r=0;r<t.length;r++)n.push(Object(o.deleteRole)(t[r].id));Promise.all(n).then(function(){return e.loadPage(e.queryList.pageIndex,e.queryList.pageSize)})},actionValidate:function(e){for(var t=0;t<e.length;t++)if("admin"===e[t].name)return!1;return!0},noLoading:!0,confirm:"确定要删除选中的实例?",noNeedSelect:!0}}}}},a=n("KHd+"),s=Object(a.a)(u,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-row",{staticClass:"app-container ilayout-container"},[n("el-container",[n("el-row",{attrs:{span:24}},[n("el-header",[n("i-top-button",{attrs:{buttonsMap:e.topButtonsMap,selected:e.selected}})],1),e._v(" "),n("el-main",[n("itsnow-filter-page-list",{on:{rowAction:e.rowAction,loadPage:e.loadPage,selected:e.hasSelected},scopedSlots:e._u([{key:"row",fn:function(t){var o=t.row;return["status"==t.column.name?n("div",["系统"==o.status?n("span",[e._v("系统")]):e._e(),e._v(" "),"自定义"==o.status?n("span",[e._v("自定义")]):e._e()]):e._e()]}}]),model:{value:e.pageModel,callback:function(t){e.pageModel=t},expression:"pageModel"}})],1)],1)],1)],1)},[],!1,null,null,null);t.default=s.exports},qW5P:function(e,t,n){"use strict";function o(e){e||(e={});var t={};return e.pageIndex?t.pageNum=e.pageIndex:t.pageNum=1,e.pageSize?t.pageSize=e.pageSize:t.pageSize=10,t.name=e.name,t.where=e.where,passportRequest({url:"/api/v2/roles",method:"get",params:t})}function r(e){return passportRequest({url:"/api/v2/roles/"+e,method:"get"})}function u(e){return passportRequest({url:"/api/v2/roles",method:"post",data:e})}function a(e){return passportRequest({url:"/api/v2/roles/"+e.id,method:"put",data:e})}function s(e){return passportRequest({url:"/api/v2/roles/"+e,method:"delete"})}function i(e){return passportRequest({url:"/api/v2/roles/"+e+"/users",method:"get"})}function l(e){return passportRequest({url:"/api/v2/roles/"+e+"/orgs",method:"get"})}function d(e){return passportRequest({url:"/api/v2/roles/"+e+"/groups",method:"get"})}function p(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/users/"+t,method:"post"})}function c(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/orgs/"+t,method:"post"})}function m(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/groups/"+t,method:"post"})}function f(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/users/"+t,method:"delete"})}function g(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/orgs/"+t,method:"delete"})}function h(e,t){return passportRequest({url:"/api/v2/roles/"+e+"/groups/"+t,method:"delete"})}n.r(t),n.d(t,"queryRole",function(){return o}),n.d(t,"getRole",function(){return r}),n.d(t,"addRole",function(){return u}),n.d(t,"updateRole",function(){return a}),n.d(t,"deleteRole",function(){return s}),n.d(t,"queryUserByRole",function(){return i}),n.d(t,"queryOrgByRole",function(){return l}),n.d(t,"queryGroupByRole",function(){return d}),n.d(t,"addUserByRole",function(){return p}),n.d(t,"addOrgByRole",function(){return c}),n.d(t,"addGroupByRole",function(){return m}),n.d(t,"deleteUserByRole",function(){return f}),n.d(t,"deleteOrgByRole",function(){return g}),n.d(t,"deleteGroupByRole",function(){return h})}}]);