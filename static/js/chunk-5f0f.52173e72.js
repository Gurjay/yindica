(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5f0f"],{"6hPr":function(e,t,i){},"8VYN":function(e,t,i){"use strict";var n=i("N1Bp");i.n(n).a},N1Bp:function(e,t,i){},cibC:function(e,t,i){"use strict";var n=i("jmi7");i.n(n).a},"eW/W":function(e,t,i){},hXSw:function(e,t,i){"use strict";var n=i("eW/W");i.n(n).a},jmi7:function(e,t,i){},"rm5+":function(e,t,i){"use strict";var n=i("6hPr");i.n(n).a},vGel:function(e,t,i){"use strict";i.r(t);var n={props:{categories:{type:Array}},model:{event:["reloadTree","current","statusChange"]},data:function(){return{editable:!1,showAdd:!1,temp_name:"",temp_label:"",temp_selectable:!0,current:null,defaultProps:{children:"children",label:"label"},openFold:!0,menuTree:[{label:"首页",system:!0,id:1,children:[{label:"总览",system:!0,id:2},{id:3,label:"设置",children:[{label:"面板库",id:4},{id:5,label:"视图"}]}]},{label:"客服中心",system:!0,id:7,children:[{label:"总览",system:!0,id:8},{id:9,label:"客服坐席"},{id:10,label:"服务工单"},{id:11,label:"信息发布"},{id:111,label:"客服协同"}]},{id:12,label:"运维中心",system:!0,children:[{label:"总览",system:!0,id:13},{id:14,label:"请求"},{id:15,label:"故障"}]},{id:16,label:"监控中心",children:[{id:17,label:"总览"},{id:18,label:"拓扑图"}]},{id:19,label:"操作中心",children:[{id:20,label:"总览"}]},{id:21,label:"开发设置",children:[{id:22,label:"总览"}]},{id:23,label:"知识库",children:[{id:24,label:"总览"}]},{id:26,label:"设置",children:[{id:27,label:"初始化"}]},{id:28,label:"运营分析",children:[]},{id:29,label:"资源中心",children:[]},{id:30,label:"配置中心",children:[]},{id:31,label:"系统设置",children:[]}],rules:{name:[{trigger:"blur",required:!0}],label:[{trigger:"blur",required:!0}]}}},mounted:function(){this.onItemClick(this.menuTree[0])},methods:{editMenu:function(){this.editable=!0},saveMenu:function(){this.findResult(this.categories,[],[],[],null)},cancelSave:function(){var e=this;this.$confirm("是否取消?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){e.editable=!1,e.$emit("reloadTree")}).catch(function(){})},addClick:function(e,t){this.onItemClick(t),this.showAdd=!0},deleteClick:function(e,t){var i=this;this.onItemClick(t),null!=this.current&&0==this.current.system?this.$confirm("是否要删除此节点?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){if(null==t.id){var n=e.parent,l=n.data.children;n.childNodes;if(null!=n){var a=l.findIndex(function(e){return e.name===t.name});a>0&&l.splice(a,1)}}else t.deleted=!0;i.resetTree()}).catch(function(){i.$message({type:"info",message:"已取消删除"})}):this.$message({type:"info",message:"不可删除系统菜单"})},moveUp:function(e,t){this.onItemClick(t);var i=void 0,n=void 0;if(e.level>1){var l=e.parent;i=l.data.children,n=l.childNodes}else{var a=e.parent;i=this.categories,n=a.childNodes}var s=i.findIndex(function(e){return e.name===t.name});if(s>0){var r=i[s],o=i[s-1];this.$set(i,s-1,r),this.$set(i,s,o);var d=n[s-1],c=n[s];this.$set(n,s-1,c),this.$set(n,s,d),this.addUpdate(t),this.addUpdate(o),this.resetTree()}},moveDown:function(e,t){this.onItemClick(t);var i=void 0,n=void 0;if(e.level>1){var l=e.parent;i=l.data.children,n=l.childNodes}else{var a=e.parent;i=this.categories,n=a.childNodes}var s=i.findIndex(function(e){return e.name===t.name});if(s<i.length){var r=i[s],o=i[s+1];this.$set(i,s+1,r),this.$set(i,s,o);var d=n[s+1],c=n[s];this.$set(n,s+1,c),this.$set(n,s,d),this.addUpdate(t),this.addUpdate(o),this.resetTree()}},moveLeft:function(e,t){this.onItemClick(t);var i=void 0,n=void 0;i=e.parent.data.children,n=e.parent.parent.data.children;var l=i.findIndex(function(e){return e.name===t.name}),a=i[l];i.splice(l,1),n.push(a),this.addUpdate(t),this.resetTree()},moveRight:function(e,t){this.onItemClick(t);var i=e.parent.data.children,n=i.findIndex(function(e){return e.name===t.name});if(n>0){var l=i[n],a=i[n-1].children;i.splice(n,1),a.push(l),this.addUpdate(t),this.resetTree()}},onItemClick:function(e){this.current!=e&&(this.current=e,this.$emit("current",this.current)),1==this.editable&&(this.addUpdate(e),this.resetTree())},onAddConfirm:function(){var e={name:this.temp_name,label:this.temp_label,type:"url",selectable:this.temp_selectable,description:"",icon:"",parent:this.current.name,system:!1,url:"",module:""};this.current.children.push(e),this.closeAdd()},closeAdd:function(){this.temp_name="",this.temp_label="",this.temp_selectable=!0,this.showAdd=!1},addUpdate:function(e){null!=e.id&&1==this.editable&&(e.updated=!0)},findResult:function(e,t,i,n,l){for(var a=0;a<e.length;a++){var s=e[a];null==s.id?t.push(s):1==s.deleted?n.push(s.name):1!=s.updated&&s.position==a||(s.position=a,null!=l&&(s.parent=l),i.push(s)),null!=s.children&&s.children.length>0&&this.findResult(s.children,t,i,n,s.name)}},resetTree:function(){this.editable=!1,this.editable=!0}},watch:{editable:function(e){1==e&&null!=this.current&&(this.current.updated=!0),this.$emit("statusChange",e)}}},l=(i("hXSw"),i("rm5+"),i("8VYN"),i("cibC"),i("KHd+")),a=Object(l.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",[i("el-container",{staticClass:"sub"},[i("el-header",[i("itsnow-text",{staticStyle:{width:"100px"}}),e._v(" "),i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-search"},on:{click:function(e){}}}),e._v(" "),e.openFold?i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder-opened"},on:{click:function(t){e.openFold=!1}}}):e._e(),e._v(" "),e.openFold?e._e():i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-folder"},on:{click:function(t){e.openFold=!0}}}),e._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"编辑",placement:"top-start"}},[0==e.editable?i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-edit-outline"},on:{click:e.editMenu}}):e._e()],1),e._v(" "),1==e.editable?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"保存",placement:"top-start"}},[i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"iconfont iconbaocun"},on:{click:e.saveMenu}})],1):e._e(),e._v(" "),1==e.editable?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"全部还原",placement:"top-start"}},[i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-refresh-left"},on:{click:e.cancelSave}})],1):e._e(),e._v(" "),1==e.editable?i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"新增根节点",placement:"top-start"}},[i("el-button",{staticStyle:{padding:"5px",width:"auto"},attrs:{size:"mini",type:"primary",icon:"el-icon-plus"},on:{click:e.addfater}})],1):e._e()],1),e._v(" "),i("el-main",[i("el-aside",{staticClass:"its_tree"},[i("el-tree",{attrs:{data:e.menuTree,props:e.defaultProps,"node-key":"id","default-checked-keys":[1],"highlight-current":!0},on:{"node-click":e.onItemClick},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.node,l=t.data;return i("span",{staticClass:"custom-tree-node",staticStyle:{width:"100%"}},[i("el-row",[i("el-col",{attrs:{span:12}},[1==l.deleted?i("span",{staticStyle:{"text-decoration":"line-through"}},[e._v(e._s(n.label))]):null==l.id?i("span",[e._v(e._s(n.label))]):1==l.updated?i("span",[e._v("*"+e._s(n.label))]):i("span",[e._v(e._s(n.label))])]),e._v(" "),i("el-col",{attrs:{span:12}},[1==e.editable&&1!=l.deleted?i("el-row",[i("el-col",{attrs:{span:3}},[i("i",{staticClass:"el-icon-plus",on:{click:function(t){return e.addClick(n,l)}}})]),e._v(" "),1!=l.system?i("el-col",{attrs:{span:3}},[i("i",{staticClass:"el-icon-delete"})]):e._e()],1):e._e()],1)],1)],1)}}])})],1)],1)],1),e._v(" "),e.showAdd?i("el-dialog",{directives:[{name:"dialogDrag",rawName:"v-dialogDrag"}],attrs:{title:"新增菜单",visible:e.showAdd},on:{"update:visible":function(t){e.showAdd=t}}},[i("div",{staticClass:"its_det"},[i("el-row",{staticClass:"its_form_row"},[i("el-form",{attrs:{"label-width":"80px",rules:e.rules}},[i("el-col",{staticClass:"its_card_form",attrs:{span:24,offset:0}},[i("el-col",{attrs:{span:10,offset:1}},[i("el-form-item",{attrs:{label:"菜单标识",prop:"name"}},[i("el-input",{model:{value:e.temp_name,callback:function(t){e.temp_name=t},expression:"temp_name"}})],1)],1),e._v(" "),i("el-col",{attrs:{span:10,offset:1}},[i("el-form-item",{attrs:{label:"菜单名称",prop:"label"}},[i("el-input",{model:{value:e.temp_label,callback:function(t){e.temp_label=t},expression:"temp_label"}})],1)],1)],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:e.onAddConfirm}},[e._v("确 定")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.closeAdd}},[e._v("取 消")])],1)]):e._e()],1)},[],!1,null,"8cb7f93c",null);t.default=a.exports}}]);