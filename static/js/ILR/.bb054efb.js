(window.webpackJsonp=window.webpackJsonp||[]).push([["ILR/"],{"ILR/":function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.r(t),t.default={props:{categories:{type:Array}},model:{event:["reloadTree","current","statusChange"]},data:function(){var e;return n(e={openFold:!0,select:"父节点(father)",moveLevel:!1,editable:!1,showAdd:!1,temp_name:"",temp_label:"新节点",temp_selectable:!0,current:null,defaultProps:{children:"children",label:"label"},menuTree:[{label:"依赐诺网络科技",id:1,system:!0,children:[{label:"技术研发部",id:2,system:!1}]},{label:"国际软件公司",id:7,system:!1,children:[{label:"市场运维部",id:8,system:!1}]},{id:9,label:"广州基楚科技",system:!1,children:[{id:10,system:!1,label:"北京科电有限公司"}]}]},"defaultProps",{children:"children",label:"label"}),n(e,"rules",{name:[{trigger:"blur",required:!0}],label:[{trigger:"blur",required:!0}]}),e},mounted:function(){this.onItemClick(this.menuTree[0])},methods:{editMenu:function(){this.editable=!0},saveMenu:function(){var e=this,t=[],i=[],n=[];this.findResult(this.categories,t,i,n,null),menuTree.batchUpdate(t,i,n).then(function(t){e.$message({message:"保存成功",type:"success"}),e.editable=!1,e.$emit("reloadTree")})},cancelSave:function(){var e=this;this.$confirm("是否取消?","提示",{customClass:"its_message_box",cancelButtonClass:"el-button--mini",confirmButtonClass:"el-button--mini",cancelButtonText:"取 消",confirmButtonText:"确 定",type:"warning"}).then(function(){e.editable=!1,e.$emit("reloadTree")}).catch(function(){})},addClick:function(e,t){this.onItemClick(t),this.onAddConfirm()},addfater:function(){this.menuTree.push({label:"新节点",id:"",system:!1,children:[]})},moveUp:function(e,t){this.onItemClick(t);var i=void 0,n=void 0;if(e.level>1){var s=e.parent;i=s.data.children,n=s.childNodes}else{var a=e.parent;i=this.categories,n=a.childNodes}var r=i.findIndex(function(e){return e.name===t.name});if(r>0){var l=i[r],d=i[r-1];this.$set(i,r-1,l),this.$set(i,r,d);var h=n[r-1],c=n[r];this.$set(n,r-1,c),this.$set(n,r,h),this.addUpdate(t),this.addUpdate(d),this.resetTree()}},moveDown:function(e,t){this.onItemClick(t);var i=void 0,n=void 0;if(e.level>1){var s=e.parent;i=s.data.children,n=s.childNodes}else{var a=e.parent;i=this.categories,n=a.childNodes}var r=i.findIndex(function(e){return e.name===t.name});if(r<i.length){var l=i[r],d=i[r+1];this.$set(i,r+1,l),this.$set(i,r,d);var h=n[r+1],c=n[r];this.$set(n,r+1,c),this.$set(n,r,h),this.addUpdate(t),this.addUpdate(d),this.resetTree()}},moveLeft:function(e,t){this.onItemClick(t);var i=void 0,n=void 0;i=e.parent.data.children,n=e.parent.parent.data.children;var s=i.findIndex(function(e){return e.name===t.name}),a=i[s];i.splice(s,1),n.push(a),this.addUpdate(t),this.resetTree()},moveRight:function(e,t){this.onItemClick(t);var i=e.parent.data.children,n=i.findIndex(function(e){return e.name===t.name});if(n>0){var s=i[n],a=i[n-1].children;i.splice(n,1),a.push(s),this.addUpdate(t),this.resetTree()}},onItemClick:function(e){this.current!=e&&(this.current=e,this.$emit("current",this.current)),1==this.editable&&(this.addUpdate(e),this.resetTree())},onAddConfirm:function(){var e={name:this.temp_name,label:this.temp_label,type:"url",selectable:this.temp_selectable,description:"",icon:"",parent:this.current.name,system:!1,url:"",module:""};this.current.children.push(e)},closeAdd:function(){this.temp_name="",this.temp_label="",this.temp_selectable=!0,this.showAdd=!1},addUpdate:function(e){null!=e.id&&1==this.editable&&(e.updated=!0)},findResult:function(e,t,i,n,s){for(var a=0;a<e.length;a++){var r=e[a];null==r.id?t.push(r):1==r.deleted?n.push(r.name):1!=r.updated&&r.position==a||(r.position=a,null!=s&&(r.parent=s),i.push(r)),null!=r.children&&r.children.length>0&&this.findResult(r.children,t,i,n,r.name)}},resetTree:function(){this.editable=!1,this.editable=!0}},watch:{editable:function(e){1==e&&null!=this.current&&(this.current.updated=!0),this.$emit("statusChange",e)}}}}}]);